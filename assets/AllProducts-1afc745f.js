import{r as l,e as Q,u as _,j as s,a as q,b as I}from"./index-8e120a52.js";import{S as T}from"./SingleProductCard-6856e929.js";import{S as D}from"./Slider-8a0c2d73.js";/* empty css              */const G=({})=>{const{products:i,categories:b}=l.useContext(Q),[r,P]=l.useState([]),[n,j]=l.useState([]),[m,C]=l.useState(0),[g,w]=l.useState(1e4),[o,N]=l.useState([m,g]),[d,y]=l.useState(""),{i18n:c}=_(),[a,h]=l.useState([]),[x,S]=l.useState([]),v=e=>{a.includes(e)?h(a.filter(t=>t!==e)):h([...a,e])},A=async()=>{try{const e=await q.get(`${I}/allProduct`),{data:t}=e;P(t.data),console.log(t.data)}catch(e){console.log(e)}};l.useEffect(()=>{A()},[]),console.log(r),console.log(i),l.useEffect(()=>{if(r.length>0&&i.length>0){const e=[...r,...i];j(e),C(Math.min(...e.map(t=>t.price))),w(Math.max(...e.map(t=>t.price))+200)}},[r,i]),l.useEffect(()=>{const e=n.filter(t=>!r.some(u=>u.id===t.id)).filter(t=>{const u=t.title.en.toLowerCase(),M=t.title.ar.toLowerCase(),p=d.toLowerCase(),f=t.price,R=t.category_id,k=u.includes(p)||M.includes(p),L=f>=o[0]&&f<=o[1],F=a.length===0||a.includes(R);return k&&L&&F});console.log(e),S(e)},[n,r,d,o,a]);const E=n.filter(e=>!r.some(t=>t.id===e.id));return console.log("Excluded products:",E),s.jsx("div",{className:"flex flex-col container py-5 min-h-screen relative",children:s.jsxs("div",{className:"flex flex-col sm:flex-row",children:[s.jsxs("div",{className:"md:w-1/4 bg-white rounded-lg p-4 md:sticky md:top-44 h-fit overflow-y-auto shadow-lg flex flex-col gap-5",children:[s.jsx("h3",{className:"font-bold text-lg border-b border-gray-400 pb-4",children:c.language==="en"?"filter":"تصفية"}),s.jsx("div",{className:"w-full border-b border-gray-400 pb-4",children:s.jsx("input",{className:"w-full border border-gray-200 border-solid h-8",type:"text",name:"searchInAllProducts",id:"searchInAllProducts",value:d,placeholder:c.language==="en"?"search":"ابحث",onChange:e=>y(e.target.value)})}),s.jsxs("div",{className:"w-full border-b border-gray-400 pb-4",children:[s.jsxs("label",{className:"text-secondColor font-bold",htmlFor:"priceRange",children:[c.language==="en"?"Price Range":"سعر المنتج ",": ",o[0]," - ",o[1]]}),s.jsx(D,{range:!0,id:"priceRange",className:"mt-4",min:m,max:g,step:10,value:o,onChange:e=>N(e)})]}),s.jsxs("div",{className:"w-full",children:[s.jsxs("h4",{className:"mb-2 text-secondColor font-bold",children:[c.language==="en"?"Categories":"التصنيفات ",":"]}),s.jsx("ul",{children:b.map(e=>s.jsx("li",{children:s.jsxs("label",{htmlFor:e.id,className:"flex items-center gap-4",children:[s.jsx("input",{type:"checkbox",id:e.id,className:"border-solid border-mainColor",checked:a.includes(e.id),onChange:()=>v(e.id)}),c.language==="en"?e.title.en:e.title.ar]})},e.id))})]})]}),s.jsx("div",{className:"md:w-3/4 p-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:x.length>0?x.map(e=>s.jsx(T,{allProducts:!0,background:"white",productDetails:e,id:e.id,title:e.title,total_price:e.total_price,price:e.price,quantity:e.quantity,image:e.images[0].path,category:e.category},e.id)):s.jsx("p",{children:"No products found."})})})]})})};export{G as default};

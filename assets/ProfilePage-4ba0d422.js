import{r,c as be,u as we,A as ye,j as e,a as G,b as J,Q as u}from"./index-f5a6e49f.js";import{a as le,b as te}from"./index.esm-27fe048e.js";import{j as U}from"./index.esm-1291888a.js";import{a as ne}from"./index.esm-0ae0191e.js";import{B as oe}from"./Breadcrumbs-a037d7d7.js";import{S as _}from"./Tooltip-62f41b88.js";import"./index-795c5fe8.js";import{S as Ne}from"./react-select.esm-f2ffd8cd.js";import{u as re}from"./user-image-placeholder-50f80e46.js";import"./iconBase-f475f501.js";import"./index.esm-6f85e85f.js";import"./floating-ui.dom.browser.min-b2afe59a.js";import"./index.esm-74b16563.js";import"./toConsumableArray-0f7878d8.js";const Re=()=>{const c=localStorage.getItem("userLogged"),d=JSON.parse(localStorage.getItem("userToken")),[i,v]=r.useState({}),f=localStorage.getItem("sellerLogged"),g=JSON.parse(localStorage.getItem("sellerToken")),[l,L]=r.useState({}),ie=be(),{i18n:a}=we(),{getUserInfo:C,getSallerInfo:I,logout:q,governorates:P,getGovernorates:ce}=r.useContext(ye);if(!c&&!f)return ie("/customer-login"),null;console.log(l);const[M,Q]=r.useState(!1),[V,R]=r.useState(!1),[x,de]=r.useState(!1),[n,D]=r.useState(!1),[A,S]=r.useState(!1),[j,m]=r.useState(c?i==null?void 0:i.name:l==null?void 0:l.name),[b,h]=r.useState(c?i==null?void 0:i.email:l==null?void 0:l.email),[w,p]=r.useState(c?i==null?void 0:i.phone:l==null?void 0:l.phone),[k,ue]=r.useState(l==null?void 0:l.cash_number),[y,ge]=r.useState(""),[N,me]=r.useState(""),[he,pe]=r.useState(""),E=()=>{de(!x)},F=()=>{D(!n),S(!1)},O=()=>{S(!A),D(!1)},H=s=>{m(s.target.value)},B=s=>{h(s.target.value)},K=s=>{p(s.target.value)},xe=s=>{ue(s.target.value)},W=s=>{ge(s.target.value)},X=s=>{me(s.target.value)},T=async s=>{s.preventDefault(),Q(!0);try{const t={token:c?d:g,name:j,email:b,phone:w,governorate_id:he,cash_number:k},z=await G.post(`${J}${c?"/auth/user-update":"/vendor/auth/vendor-update"}`,t);u.success(a.language==="en"?"The profile updated successfully":"تم تحديث الملف الشخصي بنجاح"),c?C(d,v,m,h,p):I(g,L,m,h,p)}catch{u.error(a.language==="en"?"There is an error, please try again later":"يوجد خطأ ما، الرجاء المحاولة مره اخري")}finally{Q(!1),D(!1)}},$=async s=>{if(s.preventDefault(),!y){u.info(a.language==="en"?"please enter new password":"ادخل كلمة المرور الجديده");return}if(!N){u.info(a.language==="en"?"please enter confirmation password":"ادخل تاكيد كلمة المرور");return}if(y!==N){u.info(a.language==="en"?"password and confirmation password not match":"كلمة المرور وتاكيد كلمة المرور غير متطابقين");return}R(!0);try{const t={token:c?d:g,name:j,phone:w,email:b,governorate_id:l.governorate_id,cash_number:k,password:y,password_confirmation:N},z=await G.post(`${J}${c?"/auth/user-update":"/vendor/auth/vendor-update"}`,t);u.success("The password updated successfully"),c?C(d,v,m,h,p):I(g,L,m,h,p)}catch{u.error(a.language==="en"?"There is an error, please try again later":"يوجد خطأ ما، الرجاء المحاولة مره اخري")}finally{R(!1),S(!1)}},Y=r.useRef(null),[o,Z]=r.useState(null),ee=s=>{const t=s.target.files[0];Z({...o,photo:t})},ae=async s=>{s.preventDefault();const t={token:c?d:g,image:o.photo,name:j,phone:w,email:b,governorate_id:l.governorate_id,cash_number:k};try{const z=await G.post(`${J}${c?"/auth/user-update":"/vendor/auth/vendor-update"}`,t,{headers:{"Content-Type":"multipart/form-data"}});u.success(a.language==="en"?"The photo updated successfully":"تم تحديث الصورة بنجاح"),C(d,v,m,h,p)}catch{u.error(a.language==="en"?"There is an error, please try again later":"يوجد خطأ ما، الرجاء المحاولة مره اخري")}finally{R(!1),S(!1)}},se=()=>{Z({...o,photo:null})};r.useEffect(()=>{c&&C(d,v,m,h,p)},[f,g,c,d]),r.useEffect(()=>{f&&I(g,L,m,h,p)},[f,g,c,d]);const fe=P.map(s=>({value:s.id,label:s.title.en})),je=P.map(s=>({value:s.id,label:s.title.ar}));if(r.useEffect(()=>{ce()},[]),c)return e.jsxs("div",{className:"container py-10",children:[e.jsx("div",{className:"mb-10",children:e.jsx(oe,{})}),e.jsxs("div",{className:"grid grid-cols-3 gap-5 my-5",children:[e.jsxs("div",{className:"user-info col-span-3 md:col-span-1 bg-white p-3 shadow-lg rounded-md h-fit",children:[e.jsxs("div",{className:"grid mb-3",children:[o!=null&&o.photo?e.jsx(e.Fragment,{children:e.jsx("div",{className:"img-holder relative -top-10 overflow-hidden w-32 h-32 bg-secondColor text-white grid place-content-center rounded-[50%] mx-auto",children:e.jsx("img",{src:URL.createObjectURL(o==null?void 0:o.photo),alt:"Transfer photo",className:"h-full w-full"})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"img-holder relative -top-10 overflow-hidden w-32 h-32 bg-secondColor text-white grid place-content-center rounded-[50%] mx-auto",children:e.jsx("img",{src:i.image?`https://admin.horriizon.com/images/${i.image}`:re,className:"h-full w-full",alt:i.name})}),e.jsx("label",{htmlFor:"photoInput",className:"flex flex-col items-center justify-center",children:e.jsx("span",{className:"text-secondColor font-bold border-b border-b-secondColor cursor-pointer",children:a.language==="en"?"Upload New Image":"تحديث الصورة"})}),e.jsx("input",{ref:Y,id:"photoInput",type:"file",accept:".jpg,.jpeg,.png",className:"hidden",onChange:ee})]}),(o==null?void 0:o.photo)&&e.jsx("div",{children:e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx("button",{type:"button",className:"bg-mainColor text-white py-1 px-2 rounded-lg mr-2",onClick:ae,children:a.language==="en"?"Save":"حفظ"}),e.jsx("button",{type:"button",className:"bg-red-500 text-white py-1 px-2 rounded-lg",onClick:se,children:a.language==="en"?"Close":"اغلاق"})]})})]}),e.jsxs("div",{className:"info flex flex-col justify-center items-center gap-3",children:[e.jsx("h3",{children:i.name}),e.jsx("h3",{className:"text-sm md:text-md",children:i.email})]}),e.jsxs("div",{className:"actions mt-10 flex flex-col justify-center items-center gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2",onClick:F,children:[e.jsx(U,{})," ",a.language==="en"?"Edit Profile":"تعديل بياناتك"]}),e.jsxs("button",{className:"flex items-center gap-2",onClick:O,children:[e.jsx(U,{})," ",a.language==="en"?"Edit Password":"تغيير كلمة المرور"]}),e.jsxs("button",{onClick:q,className:"flex items-center gap-2",children:[e.jsx(ne,{}),a.language==="en"?"Logout":"تسجيل الخروج"]})]})]}),e.jsxs("div",{className:"col-span-3 md:col-span-2 bg-white p-3 shadow-lg rounded-md h-fit",children:[e.jsx("h2",{className:"text-xl font-medium",children:a.language==="ar"?"الملف الشخصي":"Profile"}),e.jsxs("form",{className:"flex flex-col gap-5 items-center my-5",onSubmit:T,children:[e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"name",children:a.language==="ar"?"الاسم":"Full Name"}),e.jsx("input",{className:"w-full bg-gray-300",id:"name",type:"text",value:j,readOnly:!n,onChange:s=>{n&&H(s)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"phone",children:a.language==="ar"?"رقم الهاتف":"Phone"}),e.jsx("input",{className:"w-full bg-gray-300",id:"phone",type:"tel",value:w,readOnly:!n,onChange:s=>{n&&K(s)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"email",children:a.language==="ar"?"البريد الالكتروني":"Email"}),e.jsx("input",{className:"w-full bg-gray-300",id:"email",type:"email",value:b,readOnly:!n,onChange:s=>{n&&B(s)}})]}),n&&e.jsxs("div",{className:"w-full grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:T,className:"m-0 bg-secondColor py-2 rounded-xl text-white",type:"submit",children:M?e.jsx(_,{"aria-label":"loading...",color:"purple"}):a.language==="ar"?"حفظ التعديلات":"Save Changes"}),e.jsx("button",{className:"py-2 rounded-xl border border-secondColor text-secondColor",type:"button",onClick:F,children:a.language==="ar"?"الغاء":"Cancel"})]})]}),A&&e.jsxs("form",{className:"flex flex-col gap-5 items-center my-5",onSubmit:$,children:[e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col relative",children:[e.jsx("label",{htmlFor:"new-password",children:a.language==="ar"?"كلمة المرور الجديده":"New Password"}),e.jsx("input",{className:"w-full bg-gray-300",id:"new-password",type:x?"text":"password",value:y,onChange:W}),x?e.jsx(le,{className:`absolute ${a.language==="en"?"right-3":"left-3"} top-1/2 transform translate-y-1/2 cursor-pointer`,onClick:E}):e.jsx(te,{className:`absolute ${a.language==="en"?"right-3":"left-3"} top-1/2 transform translate-y-1/2 cursor-pointer`,onClick:E})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col relative",children:[e.jsx("label",{htmlFor:"confirm-password",children:a.language==="ar"?"اعد كتابة كلمة المرور":"Confirm Password"}),e.jsx("input",{className:"w-full bg-gray-300",id:"confirm-password",type:x?"text":"password",value:N,onChange:X})]}),e.jsxs("div",{className:"w-full grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:$,className:"m-0 bg-secondColor py-2 rounded-xl text-white",type:"submit",children:V?e.jsx(_,{"aria-label":"loading...",color:"purple"}):a.language==="ar"?"حفظ كلمة المرور":"Uptade Password"}),e.jsx("button",{className:"py-2 rounded-xl border border-secondColor text-secondColor",type:"button",onClick:O,children:a.language==="ar"?"الغاء":"Cancel"})]})]})]})]})]});if(f){console.log(l),console.log(P);const s=P.find(t=>t.id===l.governorate_id);return console.log(s),e.jsxs("div",{className:"container py-10",children:[e.jsx("div",{className:"mb-10",children:e.jsx(oe,{})}),e.jsxs("div",{className:"grid grid-cols-3 gap-5 my-5",children:[e.jsxs("div",{className:"user-info col-span-3 md:col-span-1 bg-white p-3 shadow-lg rounded-md h-fit",children:[e.jsxs("div",{className:"grid mb-3",children:[o!=null&&o.photo?e.jsx(e.Fragment,{children:e.jsx("div",{className:"img-holder relative -top-10 overflow-hidden w-32 h-32 bg-secondColor text-white grid place-content-center rounded-[50%] mx-auto",children:e.jsx("img",{src:URL.createObjectURL(o==null?void 0:o.photo),alt:"Transfer photo",className:"h-full w-full"})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"img-holder relative -top-10 overflow-hidden w-32 h-32 bg-secondColor text-white grid place-content-center rounded-[50%] mx-auto",children:e.jsx("img",{src:i.image?`https://admin.horriizon.com/images/${i.image}`:re,className:"h-full w-full",alt:i.name})}),e.jsx("label",{htmlFor:"photoInput",className:"flex flex-col items-center justify-center",children:e.jsx("span",{className:"text-secondColor font-bold border-b border-b-secondColor cursor-pointer",children:a.language==="en"?"Upload New Image":"تحديث الصورة"})}),e.jsx("input",{ref:Y,id:"photoInput",type:"file",accept:".jpg,.jpeg,.png",className:"hidden",onChange:ee})]}),(o==null?void 0:o.photo)&&e.jsx("div",{children:e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx("button",{type:"button",className:"bg-mainColor text-white py-1 px-2 rounded-lg mr-2",onClick:ae,children:a.language==="en"?"Save":"حفظ"}),e.jsx("button",{type:"button",className:"bg-red-500 text-white py-1 px-2 rounded-lg",onClick:se,children:a.language==="en"?"Close":"اغلاق"})]})})]}),e.jsxs("div",{className:"info flex flex-col justify-center items-center gap-3",children:[e.jsx("h3",{children:l.name}),e.jsx("h3",{className:"text-sm md:text-md",children:l.email})]}),e.jsxs("div",{className:"actions mt-10 flex flex-col justify-center items-center gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2",onClick:F,children:[e.jsx(U,{})," ",a.language==="en"?"Edit Profile":"تعديل بياناتك"]}),e.jsxs("button",{className:"flex items-center gap-2",onClick:O,children:[e.jsx(U,{})," ",a.language==="en"?"Edit Password":"تغيير كلمة المرور"]}),e.jsxs("button",{onClick:q,className:"flex items-center gap-2",children:[e.jsx(ne,{}),a.language==="en"?"Logout":"تسجيل الخروج"]})]})]}),e.jsxs("div",{className:"col-span-3 md:col-span-2 bg-white p-3 shadow-lg rounded-md h-fit",children:[e.jsx("h2",{className:"text-xl font-medium",children:a.language==="ar"?"الملف الشخصي":"Profile"}),e.jsxs("form",{className:"flex flex-col gap-5 items-center my-5",onSubmit:T,children:[e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"name",children:a.language==="ar"?"الاسم":"Full Name"}),e.jsx("input",{className:"w-full bg-gray-300",id:"name",type:"text",value:j||l.name,readOnly:!n,onChange:t=>{n&&H(t)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"phone",children:a.language==="ar"?"رقم الهاتف":"Phone"}),e.jsx("input",{className:"w-full bg-gray-300",id:"phone",type:"tel",value:w||l.phone,readOnly:!n,onChange:t=>{n&&K(t)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"email",children:a.language==="ar"?"البريد الالكتروني":"Email"}),e.jsx("input",{className:"w-full bg-gray-300",id:"email",type:"email",value:b||l.email,readOnly:!n,onChange:t=>{n&&B(t)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"cashNumber",children:a.language==="ar"?"رقم المحفظة الالكترونية":"Cash Number"}),e.jsx("input",{className:"w-full bg-gray-300",id:"cashNumber",type:"tel",value:k||l.cash_number,readOnly:!n,onChange:t=>{n&&xe(t)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"email",children:a.language==="ar"?"المحافظة":"Governorate"}),n?e.jsx(Ne,{name:"governorate",id:"governorate",className:"rounded-lg border-gray-300 shadow-md col-span-2",onChange:t=>pe(t.value),options:a.language==="en"?fe:je,placeholder:a.language==="ar"?"ادخل محافظتك":"enter your Governorate",isRtl:a.language==="ar",readOnly:!n,isSearchable:!0,required:!0}):e.jsx("input",{className:"w-full bg-gray-300",id:"governorate",type:"text",value:a.language==="en"?s==null?void 0:s.title.en:s==null?void 0:s.title.ar,readOnly:!n,onChange:t=>{n&&B(t)}})]}),n&&e.jsxs("div",{className:"w-full grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:T,className:"m-0 bg-secondColor py-2 rounded-xl text-white",type:"submit",children:M?e.jsx(_,{"aria-label":"loading...",color:"purple"}):a.language==="ar"?"حفظ التعديلات":"Save Changes"}),e.jsx("button",{className:"py-2 rounded-xl border border-secondColor text-secondColor",type:"button",onClick:F,children:a.language==="ar"?"الغاء":"Cancel"})]})]}),A&&e.jsxs("form",{className:"flex flex-col gap-5 items-center my-5",onSubmit:$,children:[e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col relative",children:[e.jsx("label",{htmlFor:"new-password",children:a.language==="ar"?"كلمة المرور الجديده":"New Password"}),e.jsx("input",{className:"w-full bg-gray-300",id:"new-password",type:x?"text":"password",value:y,onChange:W}),x?e.jsx(le,{className:`absolute ${a.language==="en"?"right-3":"left-3"} top-1/2 transform translate-y-1/2 cursor-pointer`,onClick:E}):e.jsx(te,{className:`absolute ${a.language==="en"?"right-3":"left-3"} top-1/2 transform translate-y-1/2 cursor-pointer`,onClick:E})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col relative",children:[e.jsx("label",{htmlFor:"confirm-password",children:a.language==="ar"?"اعد كتابة كلمة المرور":"Confirm Password"}),e.jsx("input",{className:"w-full bg-gray-300",id:"confirm-password",type:x?"text":"password",value:N,onChange:X})]}),e.jsxs("div",{className:"w-full grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:$,className:"m-0 bg-secondColor py-2 rounded-xl text-white",type:"submit",children:V?e.jsx(_,{"aria-label":"loading...",color:"purple"}):a.language==="ar"?"حفظ كلمة المرور":"Uptade Password"}),e.jsx("button",{className:"py-2 rounded-xl border border-secondColor text-secondColor",type:"button",onClick:O,children:a.language==="ar"?"الغاء":"Cancel"})]})]})]})]})]})}};export{Re as default};

import{q,u as I,j as e,n as J,r as t,A as Q,a as S,b as k,Q as o}from"./index-099e58b2.js";import{g as E}from"./index.esm-e7e633cd.js";import{a as R}from"./index.esm-71dbc4c2.js";import{B as p}from"./Tooltip-bcaf9ccf.js";import"./index-22103bd9.js";import{H as _}from"./index.esm-6ebbf849.js";import"./iconBase-5269505b.js";import"./index.esm-ff6dc694.js";const z="/assets/userImage-0ca3b41a.png",G=()=>{const c=q().pathname.split("/").filter(n=>n!==""),{t:f,i18n:a}=I();return e.jsxs(p,{className:"breadcrumb","aria-label":"breadcrumb",children:[e.jsx(p.Item,{href:"/",icon:_,children:e.jsx("p",{children:a.language==="ar"?"الصفحه الرئيسه":"Home"})}),c.map((n,i)=>e.jsx(p.Item,{href:`/${c.slice(0,i+1).join("/")}`,children:n==="profile"?a.language==="ar"?"الملف الشخصي":"Profile":n},i))]})},se=()=>{const l=JSON.parse(localStorage.getItem("userInfo")),c=localStorage.getItem("userLogged"),f=J(),{i18n:a}=I(),{logout:n,refreshToken:i}=t.useContext(Q);if(!c)return f("/customer-login"),null;t.useState(!1);const[r,x]=t.useState(!1),[j,w]=t.useState(!1),[u,F]=t.useState(l.name),[m,O]=t.useState(l.email),[g,L]=t.useState(l.phone),[b,B]=t.useState(""),[y,H]=t.useState(""),N=()=>{x(!r),w(!1)},v=()=>{w(!j),x(!1)},A=s=>{F(s.target.value)},$=s=>{O(s.target.value)},D=s=>{L(s.target.value)},T=s=>{B(s.target.value)},U=s=>{H(s.target.value)},C=async s=>{s.preventDefault(),i(l.token);const d={token:l.token,name:u,phone:g,email:m};S.post(`${k}/auth/user-update`,d).then(h=>{console.log(h),h.status===200?o.success("the profile updated successfully"):o.error("there is an error, please try again later")}).catch(h=>{o.error("there is an error, please try again later")})},P=s=>{s.preventDefault(),i(l.token),l.token,S.post(`${k}/auth/user-update`,{password:updatedPassword}).then(d=>{d.status===200?o.success("the password updated successfully"):o.error("there is an error, please try again later")}).catch(d=>{o.error("there is an error, please try again later")})};return e.jsxs("div",{className:"container py-10",children:[e.jsx("div",{className:"mb-10",children:e.jsx(G,{})}),e.jsxs("div",{className:"grid grid-cols-3 gap-5 my-5",children:[e.jsxs("div",{className:"user-info col-span-3 md:col-span-1 bg-white p-3 shadow-lg rounded-md h-fit",children:[e.jsx("div",{className:"img-holder relative -top-10 overflow-hidden w-32 h-32 bg-[#F28423] rounded-[50%] mx-auto",children:e.jsx("img",{src:l.image||z,className:"h-full w-full",alt:l.name})}),e.jsxs("div",{className:"info flex flex-col justify-center items-center gap-3",children:[e.jsx("h3",{children:l.name}),e.jsx("h3",{className:"text-sm md:text-md",children:l.email})]}),e.jsxs("div",{className:"actions mt-10 flex flex-col justify-center items-center gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2",onClick:N,children:[e.jsx(E,{})," ",a.language==="en"?"Edit Profile":"تعديل بياناتك"]}),e.jsxs("button",{className:"flex items-center gap-2",onClick:v,children:[e.jsx(E,{})," ",a.language==="en"?"Edit Password":"تغيير كلمة المرور"]}),e.jsxs("button",{onClick:n,className:"flex items-center gap-2",children:[e.jsx(R,{}),a.language==="en"?"Logout":"تسجيل الخروج"]})]})]}),e.jsxs("div",{className:"col-span-3 md:col-span-2 bg-white p-3 shadow-lg rounded-md",children:[e.jsx("h2",{className:"text-xl font-medium",children:a.language==="ar"?"الملف الشخصي":"Profile"}),e.jsxs("form",{className:"flex flex-col gap-5 items-center my-5",onSubmit:C,children:[e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"name",children:a.language==="ar"?"الاسم":"Full Name"}),e.jsx("input",{className:"w-full bg-gray-300",id:"name",type:"text",value:u,readOnly:!r,onChange:s=>{r&&A(s)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"phone",children:a.language==="ar"?"رقم الهاتف":"Phone"}),e.jsx("input",{className:"w-full bg-gray-300",id:"phone",type:"tel",value:g,readOnly:!r,onChange:s=>{r&&D(s)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"email",children:a.language==="ar"?"البريد الالكتروني":"Email"}),e.jsx("input",{className:"w-full bg-gray-300",id:"email",type:"email",value:m,readOnly:!r,onChange:s=>{r&&$(s)}})]}),r&&e.jsxs("div",{className:"w-full grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:C,className:"m-0 bg-secondColor py-2 rounded-xl text-white",type:"submit",children:a.language==="ar"?"حفظ التعديلات":"Save Changes"}),e.jsx("button",{className:"py-2 rounded-xl border border-secondColor text-secondColor",type:"button",onClick:N,children:a.language==="ar"?"الغاء":"Cancel"})]})]}),j&&e.jsxs("form",{className:"flex flex-col gap-5 items-center my-5",onSubmit:P,children:[e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col relative",children:[e.jsx("label",{htmlFor:"current-password",children:a.language==="ar"?"كلمة السر الحالية":"Current Password"}),e.jsx("input",{className:"w-full bg-gray-300",id:"current-password",type:"password",value:b,onChange:T})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col relative",children:[e.jsx("label",{htmlFor:"new-password",children:a.language==="ar"?"كلمة السر الجديدة":"New Password"}),e.jsx("input",{className:"w-full bg-gray-300",id:"new-password",type:"password",value:y,onChange:U})]}),e.jsxs("div",{className:"w-full grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:P,className:"m-0 bg-secondColor py-2 rounded-xl text-white",type:"submit",children:a.language==="ar"?"حفظ كلمة السر":"Uptade Password"}),e.jsx("button",{className:"py-2 rounded-xl border border-secondColor text-secondColor",type:"button",onClick:v,children:a.language==="ar"?"الغاء":"Cancel"})]})]})]})]})]})};export{se as default};

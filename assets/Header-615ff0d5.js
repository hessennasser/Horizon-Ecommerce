import{G as k,r as s,e as M,u as v,j as e,L as g,i as be,k as f,l as j,m as Ne,O as G,T as ve,n as we,o as ye,b as V,p as Se,q as D,F as Ce,N as Me,D as O,s as ke}from"./index-5edf5ab7.js";import{l as Le}from"./horizon-logo-035e306d.js";import{B as $,a as Ie}from"./index.esm-13602fdd.js";import{B as ze}from"./index.esm-2d6380d8.js";import{u as C}from"./user-image-placeholder-50f80e46.js";function Ee(n){return k({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"}}]})(n)}function Be(n){return k({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M257 120.471c7.083 0 23.911 4.479 23.911 4.479 45.589 10.447 77.678 52.439 77.678 99.85V352.412l9.321 9.364 7.788 7.823H136.302l7.788-7.823 9.321-9.364V224.8c0-47.41 32.089-89.403 77.678-99.85 0 0 18.043-4.479 23.911-4.479M256 48c-17.602 0-31.059 13.518-31.059 31.2v14.559c-59.015 13.523-103.53 67.601-103.53 131.041v114.4L80 380.8v20.8h352v-20.8l-41.411-41.6V224.8c0-63.44-44.516-117.518-103.53-131.041V79.2c0-17.682-13.457-31.2-31.059-31.2zm41.411 374.4h-82.823c0 22.881 18.633 41.6 41.412 41.6s41.411-18.719 41.411-41.6z"}}]})(n)}function He(n){return k({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"title",attr:{},child:[]},{tag:"path",attr:{d:"M22.84 2.9982v17.9987c.0086 1.6473-1.3197 2.9897-2.967 2.9984a2.9808 2.9808 0 01-.3677-.0208c-1.528-.226-2.6477-1.5558-2.6105-3.1V3.1204c-.0369-1.5458 1.0856-2.8762 2.6157-3.1 1.6361-.1915 3.1178.9796 3.3093 2.6158.014.1201.0208.241.0202.3619zM4.1326 18.0548c-1.6417 0-2.9726 1.331-2.9726 2.9726C1.16 22.6691 2.4909 24 4.1326 24s2.9726-1.3309 2.9726-2.9726-1.331-2.9726-2.9726-2.9726zm7.8728-9.0098c-.0171 0-.0342 0-.0513.0003-1.6495.0904-2.9293 1.474-2.891 3.1256v7.9846c0 2.167.9535 3.4825 2.3505 3.763 1.6118.3266 3.1832-.7152 3.5098-2.327.04-.1974.06-.3983.0593-.5998v-8.9585c.003-1.6474-1.33-2.9852-2.9773-2.9882z"}}]})(n)}function Oe(n){return k({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm7.46 7.12l-2.78 1.15a4.982 4.982 0 00-2.95-2.94l1.15-2.78c2.1.8 3.77 2.47 4.58 4.57zM12 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zM9.13 4.54l1.17 2.78a5 5 0 00-2.98 2.97L4.54 9.13a7.984 7.984 0 014.59-4.59zM4.54 14.87l2.78-1.15a4.968 4.968 0 002.97 2.96l-1.17 2.78a7.996 7.996 0 01-4.58-4.59zm10.34 4.59l-1.15-2.78a4.978 4.978 0 002.95-2.97l2.78 1.17a8.007 8.007 0 01-4.58 4.58z"}}]})(n)}const $e=({image:n,name:i})=>{const{logout:c}=s.useContext(M),{i18n:t}=v(),r=localStorage.getItem("sellerLogged");return e.jsx("div",{className:`submenu z-[10000] absolute rounded-lg shadow-lg bg-white w-[340px] max-w-[90%] sm:max-w-[340px] p-8 ${t.language==="en"?"right-2":"left-2"} top-12 text-black`,children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex items-center gap-5 pb-4 border-b border-b-gray-300",children:[e.jsx("img",{src:n||"https://lh3.googleusercontent.com/Xsvl-X4MBLASFz1ha2-zl_LV3Hj4-f1sy73yWwg3QcDiJ-WKWmkQajdiolJ5Sv4oF4QtnQiuBwUsBJQsSEspLYszs1UFXf-rUhIx-00T",className:"w-12 h-12 bg-secondColor rounded-full",alt:i}),e.jsx("p",{className:"font-bold",children:i})]}),e.jsxs("div",{className:"flex flex-col gap-3 pb-4 border-b border-b-gray-300",children:[e.jsxs(g,{to:"/profile",className:"flex items-center justify-between font-medium",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{})," ",t.language==="en"?"My account":"حسابي"]}),t.language==="en"?e.jsx(f,{}):e.jsx(j,{})]}),r&&e.jsxs(g,{to:"/dashboard",className:"flex items-center justify-between font-medium",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(He,{})," ",t.language==="en"?"Dashbaord":"لوحة التحكم"]}),t.language==="en"?e.jsx(f,{}):e.jsx(j,{})]}),r?e.jsxs(g,{to:"/orders",className:"flex items-center justify-between font-medium",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{})," ",t.language==="en"?"My Orders":"الطلبات"]}),t.language==="en"?e.jsx(f,{}):e.jsx(j,{})]}):e.jsxs(g,{to:"/payments",className:"flex items-center justify-between font-medium",children:[r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{})," ",t.language==="en"?"Payments":"المدفوعات"]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{})," ",t.language==="en"?"purchases":"المشتريات"]}),t.language==="en"?e.jsx(f,{}):e.jsx(j,{})]}),e.jsxs(g,{to:"/profile",className:"flex items-center justify-between font-medium",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{})," ",t.language==="en"?"Settings":"الاعدادات"]}),t.language==="en"?e.jsx(f,{}):e.jsx(j,{})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(g,{to:"/contact-us",className:"flex items-center justify-between font-medium",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{})," ",t.language==="en"?"Support":"الدعم"]}),t.language==="en"?e.jsx(f,{}):e.jsx(j,{})]}),e.jsxs("button",{onClick:c,className:"flex items-center justify-between font-medium",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{})," ",t.language==="en"?"Logout":"تسجيل الخروج"]}),t.language==="en"?e.jsx(f,{}):e.jsx(j,{})]})]})]})})},Ae=({notifications:n,notificationLoading:i,notificationError:c})=>{const{i18n:t}=v();return e.jsxs("div",{className:`submenu z-[10000] absolute rounded-lg shadow-lg bg-white w-[340px] max-w-[90%] sm:max-w-[340px] p-8 ${t.language==="en"?"right-2":"left-2"} top-12 text-black`,children:[e.jsx("div",{className:"mb-2 pb-2 border-b",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("h6",{className:"mt-1 mb-0 text-sm font-semibold",children:"Notifications"}),e.jsx("div",{className:"ms-auto",children:e.jsx("button",{type:"button",className:"text-sm text-gray-600",children:"Mark all as read"})})]})}),e.jsxs("div",{className:"notifications-body overflow-y-auto max-h-[50dvh]",children:[i&&e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx(G,{height:50,width:50,color:"#125ed4",secondaryColor:"#060047"})}),!i&&c&&e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("p",{className:"text-red-500",children:t.language==="en"?"Error loading notifications":"يوجد خطأ، حاول مره اخري"})}),!c&&!i&&n.length>0?n==null?void 0:n.map((r,a)=>e.jsx("div",{className:"mb-2 flex  justify-between border-b pb-2",dir:"ltr",children:e.jsxs("p",{className:"text-sm font-medium text-gray-900 mx-2 w-fit",children:[`${a+1} - `,r.title]})},r.id)):e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("p",{className:"text-red-500",children:t.language==="en"?"No notifications yet":"لا يوجد اشعارات بعد"})})]})]})},Fe=({setMessagesNumber:n,messages:i,messageLoading:c,messageError:t})=>{const{i18n:r}=v();return e.jsxs("div",{className:`submenu z-[10000] absolute rounded-lg shadow-lg bg-white w-[340px] max-w-[90%] sm:max-w-[340px] p-8 ${r.language==="en"?"right-2":"left-2"} top-12 text-black`,children:[e.jsx("div",{className:"mb-2 pb-2 border-b",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("h6",{className:"mt-1 mb-0 text-sm font-semibold",children:"messages"}),e.jsx("div",{className:"ms-auto",children:e.jsx("button",{type:"button",className:"text-sm text-gray-600",children:"Mark all as read"})})]})}),e.jsxs("div",{className:"messages-body overflow-y-auto max-h-[50dvh]",children:[c&&e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx(G,{height:50,width:50,color:"#125ed4",secondaryColor:"#060047"})}),!c&&t&&e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("p",{className:"text-red-500",children:r.language==="en"?"Error loading messages":"يوجد خطأ، حاول مره اخري"})}),!t&&!c&&i.length>0?i==null?void 0:i.map((a,d)=>e.jsx("div",{className:"mb-2 flex  justify-between border-b pb-2",dir:"ltr",children:e.jsxs("p",{className:"text-sm font-medium text-gray-900 mx-2 w-fit",children:[`${d+1} - `,a.title]})},a.id)):e.jsx("div",{className:"flex justify-center items-center h-32",children:e.jsx("p",{className:"text-red-500",children:r.language==="en"?"No messages yet":"لا يوجد رسائل بعد"})})]})]})},Te=()=>{const{t:n,i18n:i}=v(),[c,t]=s.useState([]),r=JSON.parse(localStorage.getItem("userToken")),a=localStorage.getItem("userLogged"),d=JSON.parse(localStorage.getItem("sellerToken")),x=localStorage.getItem("sellerLogged"),{categories:p,getCartItems:L,getTotalPriceInCart:o,total:b,sellerTotal:J,mainRequest:A}=s.useContext(M),{showSubMenu:w,setShowSubMenu:y,notificationMenu:I,setNotificationMenu:z,messagesMenu:E,setMessagesMenu:B,showSearchResult:q,setShowSearchResult:S,searchQuery:F,setSearchQuery:W,setUserName:X}=s.useContext(M),[N,Y]=s.useState(""),[T,K]=s.useState([]),H=s.useRef(null),_=l=>{l.stopPropagation(),y(!w),z(!1),B(!1)},Z=l=>{l.stopPropagation(),z(!I),y(!1),B(!1)},ee=l=>{l.stopPropagation(),B(!E),z(!1),y(!1)},[R,se]=s.useState(0),[te,ae]=s.useState([]),[le,U]=s.useState(!1),[ne,re]=s.useState(!1),ie=async()=>{U(!0);try{const l=await A.post(`${V}/vendorNotifications`,{token:d}),{data:m}=l;ae(m.data),se(m.data.length)}catch(l){console.log(l),re(!0)}finally{U(!1)}};s.useEffect(()=>{x&&ie()},[d,I]);const[Q,ce]=s.useState(0),[oe,de]=s.useState([]),[me,P]=s.useState(!1),[ge,xe]=s.useState(!1),ue=async()=>{P(!0);try{const l=await A.post(`${V}/vendorMessages`,{token:d}),{data:m}=l;de(m.data),ce(m.data.length)}catch(l){console.log(l),xe(!0)}finally{P(!1)}};s.useEffect(()=>{x&&ue()},[d,E]),s.useEffect(()=>{a&&r&&(o(),L(r,t))},[a,r,x,d,b]),s.useEffect(()=>{if(N.length>0)S(!0);else{S(!1);return}if(N.trim()!==""&&p){const l=p.filter(m=>m.title.en.toLowerCase().includes(N.toLowerCase())||m.title.ar.toLowerCase().includes(N.toLowerCase()));K(l)}else S(!1)},[N,p]),s.useEffect(()=>{const l=m=>{m.target.closest(".main-header")||(w&&!m.target.closest(".sub-menu")&&y(!1),H.current&&!m.target.closest(".search-results")&&S(!1))};return window.addEventListener("click",l),()=>{window.removeEventListener("click",l)}},[w,H]);const[u,he]=s.useState({}),[h,fe]=s.useState({}),{getUserInfo:je,getSellerInfo:pe}=s.useContext(M);return s.useEffect(()=>{a&&je(r,he)},[x,d,a,r,b]),s.useEffect(()=>{x&&pe(d,fe)},[x,d,a,r,b]),s.useEffect(()=>{X(a?u.name:h.name)}),e.jsxs("div",{className:"main-header flex items-center justify-between gap-5 flex-col md:flex-row",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full flex-1",children:[e.jsx(g,{to:"/home",className:"flex items-center",children:e.jsx("img",{className:"w-16 md:w-24",src:Le,alt:"horizon"})}),e.jsxs("div",{className:"flex-1 w-full text-xs search-holder relative",children:[e.jsx(ve,{id:"search",type:"text",rightIcon:we,placeholder:n("mainHeader.placeholder"),required:!1,value:F,onChange:l=>{Y(l.target.value),W(l.target.value)},autoComplete:"off"}),q&&e.jsx("div",{ref:H,className:"search-results px-4 absolute top-12 left-0 w-full max-h-[300px] overflow-y-auto bg-white z-[10000] rounded-lg shadow-md text-secondColor",children:T.length>0?T.map(l=>e.jsx(g,{to:`/categories/${l.id}`,className:"h-10 flex items-center border-b",children:e.jsx("div",{className:"search-result-item flex items-center justify-between gap-5 py-1",children:e.jsx("h4",{children:i.language==="en"?l.title.en:l.title.ar})})},l.id)):e.jsx("div",{className:"py-5",children:e.jsx(g,{to:`/search?q=${F}`,className:"bg-mainColor text-white text-lg px-3 py-2 mx-auto block w-fit mt-2",children:i.language==="en"?"Advanced Search":"بحث متقدم"})})})]})]}),e.jsx("div",{className:"buttons-holder md:w-fit flex justify-evenly gap-3",children:a||x?e.jsxs("div",{className:"flex items-center justify-center gap-4 relative w-full",children:[a&&e.jsx(g,{to:"/cart",children:e.jsxs("div",{className:"relative p-2",children:[e.jsx(Ie,{className:"text-xl"}),e.jsx("span",{className:"text-lg absolute -top-4 -right-2 grid place-content-center w-7 h-7 rounded-full bg-white text-secondColor",children:a?(c==null?void 0:c.length)||0:null})]})}),x&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{button:!0,className:"relative p-2",onClick:ee,children:[e.jsx(ye,{className:"text-2xl"}),Q>0&&e.jsx("span",{className:"text-lg absolute -top-4 -right-2 grid place-content-center w-7 h-7 rounded-full bg-white text-secondColor",children:Q||0})]}),e.jsxs("button",{className:"relative p-2",onClick:Z,children:[e.jsx(Be,{className:"text-2xl"}),R>0&&e.jsx("span",{className:"text-lg absolute -top-4 -right-2 grid place-content-center w-7 h-7 rounded-full bg-white text-secondColor",children:R||0})]})]}),E&&e.jsx(Fe,{messages:oe,messageLoading:me,messageError:ge}),I&&e.jsx(Ae,{notifications:te,notificationLoading:le,notificationError:ne}),e.jsxs("button",{className:"flex items-center gap-2",onClick:_,children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("img",{src:a?u.image?`https://admin.horriizon.com/public/${u.image}`:C:h.image?`https://admin.horriizon.com/public/${h.image}`:C,className:"w-12 h-12 bg-secondColor rounded-full",alt:a?u.name:h.name}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("p",{children:a?u.name:h.name}),x&&e.jsxs("p",{children:[J," EGY"]})]})]}),e.jsx(Ee,{className:"text-xl"})]}),w&&e.jsx($e,{name:a?u.name:h.name,image:a?u.image?`https://admin.horriizon.com/public/${u.image}`:C:h.image?`https://admin.horriizon.com/public/${h.image}`:C})]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{to:"seller-signup",children:e.jsx("button",{type:"button",className:"bg-secondColor p-2 rounded-lg hover:brightness-110 text-xs md:text-sm",children:n("mainHeader.signUpSellerBtn")})}),e.jsx(g,{to:"customer-signup",children:e.jsx("button",{type:"button",className:"border p-2 rounded-lg hover:brightness-110 text-xs md:text-sm",children:n("mainHeader.signUpCustomerBtn")})})]})})]})},Re=({toggleSidebar:n})=>{const[i,c]=s.useState(!1),t=localStorage.getItem("sellerLogged"),r=()=>{c(!i)},{i18n:a,t:d}=v(),x=Se(),p=o=>{a.changeLanguage(o),localStorage.setItem("language",o)};s.useEffect(()=>{const o=localStorage.getItem("language");o&&a.changeLanguage(o)},[]);const L=d("mainHeader.pages");return e.jsxs("nav",{className:"container w-full max-w-[100%] py-3 mt-3 bg-[#44406AEB] flex items-center justify-between gap-3 overflow-hidden",children:[e.jsx("div",{className:"bg-mainColor p-2 rounded-lg hover:brightness-125 flex items-center",onClick:n,children:e.jsxs("button",{className:"flex gap-2 items-center","aria-label":a.language==="en"?"categories":"الفئات",children:[e.jsx(D,{})," ",a.language==="en"?"categories":"الفئات"]})}),e.jsxs("ul",{className:`flex items-center gap-5 absolute duration-300 -top-full md:relative md:top-0 transition-all ${i?"openMenuHeader":""}`,children:[e.jsx("button",{type:"button",className:"md:hidden absolute top-5 right-1/2 translate-x-1/2 text-xl bg-secondColor p-2",onClick:r,"aria-label":a.language==="en"?"language":"اللغة",children:e.jsx(Ce,{})}),L.map(o=>!t&&o.id===6?null:(x.pathname,o.link,e.jsx("li",{children:e.jsx(Me,{to:o.link,className:({isActive:b})=>b?"border-b border-[#0096ff] text-[#0096ff]":"",children:o.name})},o.id)))]}),e.jsx("button",{type:"button",className:"md:hidden","aria-label":a.language==="en"?"menu":"القائمة",onClick:r,children:e.jsx(D,{})}),e.jsx("div",{className:"lang-toggler",children:e.jsxs(O,{label:e.jsx(ke,{}),"aria-label":"language",children:[e.jsx(O.Item,{onClick:()=>p("en"),children:"English"}),e.jsx(O.Item,{onClick:()=>p("ar"),children:"Arabic"})]})})]})};const Ge=({toggleSidebar:n})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"bg-mainColor text-white pt-3 z-[100] sticky top-0",children:[e.jsx("div",{className:"px-5 min-w-[95%] pt-2",children:e.jsx(Te,{})}),e.jsx(Re,{toggleSidebar:n})]})});export{Ge as default};

import{y as A,r,e as P,u as F,j as s}from"./index-f346a097.js";import{S as O}from"./Slider-bc8ca8b9.js";/* empty css              */import{S as Q}from"./SingleProductCard-31285f5d.js";const G=({})=>{const j=A(),w=new URLSearchParams(j.search).get("q")||"",{websiteInfo:c}=r.useContext(P),{products:o,categories:C,searchQuery:n,setSearchQuery:S}=r.useContext(P),h=Math.min(...o.map(e=>e.price))===1/0?0:Math.min(...o.map(e=>e.price)),m=Math.max(...o.map(e=>e.price))===-1/0?1e4:Math.max(...o.map(e=>e.price)),[i,y]=r.useState([h,m]),{i18n:d}=F(),[l,u]=r.useState([]),[g,N]=r.useState([]),[p,v]=r.useState([]),[x,k]=r.useState((c==null?void 0:c.search)||0),M=()=>{const e=[...o];switch(x){case 0:e.sort((t,a)=>new Date(a.created_at)-new Date(t.created_at));break;case 1:e.sort((t,a)=>new Date(t.created_at)-new Date(a.created_at));break;case 2:e.sort((t,a)=>t.price-a.price);break;case 3:e.sort((t,a)=>a.price-t.price);break;case 4:e.sort((t,a)=>Math.floor(t.sale)-Math.floor(a.sale));break;case 5:e.sort((t,a)=>Math.floor(a.sale)-Math.floor(t.sale));break;default:e.sort((t,a)=>new Date(t.created_at)-new Date(a.created_at));break}v(e)};r.useEffect(()=>{const e=p.filter(t=>{const a=t.title.en.toLowerCase(),L=t.title.ar.toLowerCase(),f=w.toLocaleLowerCase()||(n==null?void 0:n.toLowerCase()),b=t.price,D=t.category_id,R=a.includes(f)||L.includes(f),q=b>=i[0]&&b<=i[1],E=l.length===0||l.includes(D);return R&&q&&E});N(e),M()},[o,p,n,i,l,x]);const _=e=>{l.includes(e)?u(l.filter(t=>t!==e)):u([...l,e])};return r.useEffect(()=>{k(c==null?void 0:c.search)},[c]),s.jsx("div",{className:"flex flex-col container py-5 min-h-screen relative",children:s.jsxs("div",{className:"flex flex-col sm:flex-row",children:[s.jsxs("div",{className:"md:w-1/4 bg-white rounded-lg p-4 md:sticky md:top-44 h-fit overflow-y-auto shadow-lg flex flex-col gap-5",children:[s.jsx("h3",{className:"font-bold text-lg border-b border-gray-400 pb-4",children:d.language==="en"?"filter":"تصفية"}),s.jsx("div",{className:"w-full border-b border-gray-400 pb-4",children:s.jsx("input",{className:"w-full border border-gray-200 border-solid h-8",type:"text",name:"searchInAllProducts",id:"searchInAllProducts",value:n,placeholder:d.language==="en"?"search":"ابحث",onChange:e=>S(e.target.value)})}),s.jsxs("div",{className:"w-full border-b border-gray-400 pb-4",children:[s.jsxs("label",{className:"text-secondColor font-bold",htmlFor:"priceRange",children:[d.language==="en"?"Price Range":"سعر المنتج ",": ",i[0]," - ",i[1]]}),s.jsx(O,{range:!0,id:"priceRange",className:"mt-4",min:h,max:m,step:10,value:i,onChange:e=>y(e)})]}),s.jsxs("div",{className:"w-full",children:[s.jsxs("h4",{className:"mb-2 text-secondColor font-bold",children:[d.language==="en"?"Categories":"التصنيفات ",":"]}),s.jsx("ul",{children:C.map(e=>s.jsx("li",{children:s.jsxs("label",{htmlFor:e.id,className:"flex items-center gap-4",children:[s.jsx("input",{type:"checkbox",id:e.id,className:"border-solid border-mainColor",checked:l.includes(e.id),onChange:()=>_(e.id)}),d.language==="en"?e.title.en:e.title.ar]})},e.id))})]})]}),s.jsx("div",{className:"md:w-3/4 p-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:g.length>0?g.map(e=>s.jsx(Q,{allProducts:!0,background:"white",productDetails:e,id:e.id,title:e.title,total_price:e.total_price,price:e.price,quantity:e.quantity,image:e.images[0].path,category:e.category},e.id)):s.jsx("p",{children:"No products found."})})})]})})};export{G as default};

import{r,e as F,u as Q,j as s,a as _,b as D}from"./index-5a69e1c4.js";import{S as T}from"./SingleProductCard-c7589ead.js";import{S as B}from"./Slider-f55ea26a.js";/* empty css              */const H=({})=>{const{products:u,categories:P}=r.useContext(F),[o,j]=r.useState([]),[d,C]=r.useState([]),[g,w]=r.useState(0),[h,y]=r.useState(1e4),[i,N]=r.useState([g,h]),[m,S]=r.useState(""),{i18n:c}=Q(),[l,x]=r.useState([]),[f,v]=r.useState([]),A=e=>{l.includes(e)?x(l.filter(t=>t!==e)):x([...l,e])},M=async()=>{try{const e=await _.get(`${D}/allProduct`),{data:t}=e;j(t.data)}catch(e){console.log(e)}};r.useEffect(()=>{M()},[]),r.useEffect(()=>{if(o.length>0&&u.length>0){const e=[...o,...u];C(e),w(Math.min(...e.map(t=>t.price))),y(Math.max(...e.map(t=>t.price))+200)}},[o,u]);const E=e=>{const t=[],a=new Set;for(const n of e)a.has(n.id)||(t.push(n),a.add(n.id));return t};return r.useEffect(()=>{console.log(d);const e=E(d);console.log(e);const t=e.filter(a=>{const n=a.title.en.toLowerCase(),R=a.title.ar.toLowerCase(),p=m.toLowerCase(),b=a.price,k=a.category_id,q=n.includes(p)||R.includes(p),I=b>=i[0]&&b<=i[1],L=l.length===0||l.includes(k);return q&&I&&L});v(t)},[d,o,m,i,l]),d.filter(e=>!o.some(t=>t.id===e.id)),s.jsx("div",{className:"flex flex-col container py-5 min-h-screen relative",children:s.jsxs("div",{className:"flex flex-col sm:flex-row",children:[s.jsxs("div",{className:"md:w-1/4 bg-white rounded-lg p-4 md:sticky md:top-44 h-fit overflow-y-auto shadow-lg flex flex-col gap-5",children:[s.jsx("h3",{className:"font-bold text-lg border-b border-gray-400 pb-4",children:c.language==="en"?"filter":"تصفية"}),s.jsx("div",{className:"w-full border-b border-gray-400 pb-4",children:s.jsx("input",{className:"w-full border border-gray-200 border-solid h-8",type:"text",name:"searchInAllProducts",id:"searchInAllProducts",value:m,placeholder:c.language==="en"?"search":"ابحث",onChange:e=>S(e.target.value)})}),s.jsxs("div",{className:"w-full border-b border-gray-400 pb-4",children:[s.jsxs("label",{className:"text-secondColor font-bold",htmlFor:"priceRange",children:[c.language==="en"?"Price Range":"سعر المنتج ",": ",i[0]," - ",i[1]]}),s.jsx(B,{range:!0,id:"priceRange",className:"mt-4",min:g,max:h,step:10,value:i,onChange:e=>N(e)})]}),s.jsxs("div",{className:"w-full",children:[s.jsxs("h4",{className:"mb-2 text-secondColor font-bold",children:[c.language==="en"?"Categories":"التصنيفات ",":"]}),s.jsx("ul",{children:P.map(e=>s.jsx("li",{children:s.jsxs("label",{htmlFor:e.id,className:"flex items-center gap-4",children:[s.jsx("input",{type:"checkbox",id:e.id,className:"border-solid border-mainColor",checked:l.includes(e.id),onChange:()=>A(e.id)}),c.language==="en"?e.title.en:e.title.ar]})},e.id))})]})]}),s.jsx("div",{className:"md:w-3/4 p-4",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:f.length>0?f.map(e=>s.jsx(T,{allProducts:!0,background:"white",productDetails:e,id:e.id,title:e.title,total_price:e.total_price,price:e.price,quantity:e.quantity,image:e!=null&&e.images?e.images[0].path:null,category:e.category},e.id)):s.jsx("p",{children:"No products found."})})})]})})};export{H as default};

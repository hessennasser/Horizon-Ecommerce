import{e as O,r as a,A as _,u as Q,j as s}from"./index-473a0862.js";import{S as $}from"./SingleProductCard-02d715a7.js";import{b as C,c as y}from"./index.esm-53258c13.js";import{S as B}from"./index-3a893015.js";import"./iconBase-6a04ef27.js";import"./toConsumableArray-401ae2e9.js";const W=({})=>{const N=O();new URLSearchParams(N.search).get("q");const{products:r,categories:v,searchQuery:d,setSearchQuery:S}=a.useContext(_),g=Math.min(...r.map(e=>e.price))===1/0?0:Math.min(...r.map(e=>e.price)),h=Math.max(...r.map(e=>e.price))===-1/0?1e4:Math.max(...r.map(e=>e.price)),[i,k]=a.useState([g,h]),{i18n:n}=Q(),[x,U]=a.useState(!0),[l,p]=a.useState([]),[c,f]=a.useState(1),o=8,[u,M]=a.useState([]);console.log(r),a.useEffect(()=>{f(1)},[d,i,l]),a.useEffect(()=>{const e=r.filter(t=>{const A=t.title.en.toLowerCase(),q=t.title.ar.toLowerCase(),w=d.toLowerCase(),P=t.price,E=t.category_id,T=A.includes(w)||q.includes(w),F=P>=i[0]&&P<=i[1],I=l.length===0||l.includes(E);return T&&F&&I});M(e)},[r,d,i,l]);const b=c*o,L=b-o,j=u.slice(L,b),m=e=>{f(e)},R=e=>{l.includes(e)?p(l.filter(t=>t!==e)):p([...l,e])};return s.jsx("div",{className:"flex flex-col container py-5 min-h-screen relative",children:s.jsxs("div",{className:"flex flex-col sm:flex-row",children:[s.jsxs("div",{className:`md:w-1/4 bg-white rounded-lg p-4 md:sticky md:top-44 h-fit overflow-y-auto shadow-lg flex flex-col gap-5 ${!x&&""}`,children:[s.jsx("h3",{className:"font-bold text-lg border-b border-gray-400 pb-4",children:n.language==="en"?"filter":"تصفية"}),s.jsx("div",{className:"w-full border-b border-gray-400 pb-4",children:s.jsx("input",{className:"w-full border border-gray-200 border-solid h-8",type:"text",name:"searchInAllProducts",id:"searchInAllProducts",value:d,placeholder:n.language==="en"?"search":"ابحث",onChange:e=>S(e.target.value)})}),s.jsxs("div",{className:"w-full border-b border-gray-400 pb-4",children:[s.jsxs("label",{className:"text-secondColor font-bold",htmlFor:"priceRange",children:[n.language==="en"?"Price Range":"سعر المنتج ",": ",i[0]," - ",i[1]]}),s.jsx(B,{range:!0,id:"priceRange",className:"mt-4",min:g,max:h,step:10,value:i,onChange:e=>k(e)})]}),s.jsxs("div",{className:"w-full",children:[s.jsxs("h4",{className:"mb-2 text-secondColor font-bold",children:[n.language==="en"?"Categories":"التصنيفات ",":"]}),s.jsx("ul",{children:v.map(e=>s.jsx("li",{children:s.jsxs("label",{htmlFor:e.id,className:"flex items-center gap-4",children:[s.jsx("input",{type:"checkbox",id:e.id,className:"border-solid border-mainColor",checked:l.includes(e.id),onChange:()=>R(e.id)}),n.language==="en"?e.title.en:e.title.ar]})},e.id))})]})]}),s.jsxs("div",{className:"md:w-3/4 p-4 ",children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:j.length>0?j.map(e=>s.jsx($,{allProducts:!0,background:"white",productDetails:e,id:e.id,title:e.title,total_price:e.total_price,price:e.price,quantity:e.quantity,image:e.images[0].path,category:e.category},e.id)):s.jsx("p",{children:"No products found."})}),u.length>o&&s.jsx("nav",{className:"mt-4 flex justify-center",children:s.jsxs("ul",{className:"pagination flex items-center gap-3",children:[c>1&&s.jsx("li",{className:"page-item text-blue-500",children:s.jsx("button",{className:"page-link w-full h-full py-2 px-2 text-2xl",onClick:()=>{m(c-1),window.scrollTo(0,0)},children:n.language==="en"?s.jsx(C,{}):s.jsx(y,{})})}),Array.from({length:Math.ceil(u.length/o)},(e,t)=>s.jsx("li",{className:`page-item bg-gray-600 hover:bg-gray-800 text-white rounded-md  ${c===t+1?"active bg-secondColor":""}`,children:s.jsx("button",{className:"page-link w-full h-full py-2 px-4",onClick:()=>{m(t+1),window.scrollTo(0,0)},children:t+1})},t)),c<Math.ceil(u.length/o)&&s.jsx("li",{className:"page-item text-blue-500",children:s.jsx("button",{className:"page-link w-full h-full py-2 px-2 text-2xl",onClick:()=>{m(c+1),window.scrollTo(0,0)},children:n.language==="en"?s.jsx(y,{}):s.jsx(C,{})})})]})})]})]})})};export{W as default};

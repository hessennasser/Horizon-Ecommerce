import{u as P,j as e,r as i,A as F,Q as E,b as D,c as J}from"./index-f5a6e49f.js";import{B as G}from"./Breadcrumbs-a037d7d7.js";import{a as U}from"./index.esm-1291888a.js";import{L as c,F as z,T as h,S as B,M as A,B as I}from"./Tooltip-62f41b88.js";import"./index-795c5fe8.js";import{S as M}from"./react-select.esm-f2ffd8cd.js";import{F as O}from"./index.esm-27fe048e.js";import{H as Y}from"./index.esm-6f85e85f.js";import"./iconBase-f475f501.js";import"./floating-ui.dom.browser.min-b2afe59a.js";import"./index.esm-74b16563.js";import"./toConsumableArray-0f7878d8.js";const K=({id:m,openEditModal:u,openDeleteModal:x,category:b,title:o,image:g,price:d,quantity:r,end_date:v,setDeleteProductId:s,setEditProductId:n})=>{var N,f;const{i18n:j}=P();return e.jsxs("div",{className:"grid gap-2 bg-white p-3 rounded-lg shadow-md",children:[e.jsx("div",{className:"img-holder  flex justify-center items-center",children:e.jsx("img",{className:"w-32 object-contain",src:`https://admin.horriizon.com/images/${g}`,alt:j.language==="en"?o==null?void 0:o.en:o==null?void 0:o.ar})}),e.jsxs("div",{className:"info grid gap-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("span",{children:"Category :"}),e.jsx("p",{className:"font-bold",children:j.language==="en"?(N=b.title)==null?void 0:N.en:(f=b.title)==null?void 0:f.ar})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("span",{children:"Product Name :"}),e.jsx("p",{className:"font-bold",children:j.language==="en"?o==null?void 0:o.en:o==null?void 0:o.ar})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("span",{children:"Price :"}),e.jsx("p",{className:"font-bold",children:d})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("span",{children:"Quantity :"}),e.jsx("p",{className:"font-bold",children:r})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("span",{children:"End Date :"}),e.jsx("p",{className:"font-bold",children:v})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsxs("button",{type:"button",className:"flex items-center gap-2 text-secondColor text-sm",children:["Show Orders ",e.jsx(U,{})]}),e.jsxs("div",{className:"buttons-holder grid grid-cols-2 gap-2 items-end",children:[e.jsx("button",{type:"button",className:"flex items-center justify-center gap-2 bg-secondColor py-1 px-4 rounded-md hover:brightness-110 text-white",onClick:()=>{u(),n(m)},children:"Edit"}),e.jsx("button",{type:"button",className:"flex items-center justify-center gap-2 border border-secondColor text-secondColor py-1 px-4 rounded-md hover:brightness-110",onClick:()=>{x(),s(m)},children:"Delete"})]})]})]})};const V=({addModal:m,setAddModal:u,setSelectedGovernorate:x,encategoriesOptions:b,arcategoriesOptions:o,getSellerProducts:g,setAllProducts:d})=>{const{i18n:r}=P(),{addNewProduct:v}=i.useContext(F),[s,n]=i.useState({image:null,title_en:"",title_ar:"",category:null,quantity:"",price:"",end_date:"",start_date:""}),[j,N]=i.useState(null),[f,k]=i.useState(!1),t=()=>{if(!j||!s.title_en||!s.title_ar||!s.category||!s.quantity||!s.price||!s.start_date||!s.end_date){E.error(r.language==="en"?"Please enter all required fields":"برجاء إدخال جميع الحقول المطلوبة");return}const l=new FileReader;l.onloadend=()=>{const _=new Blob([l.result],{type:j.type}),w={...s,image:_};console.log(w),v(w,k,u,g,d)},l.readAsArrayBuffer(j)};return e.jsx("div",{className:"fixed z-[10000] inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen px-4 pt-4 pb-20 sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-90"})}),e.jsxs("div",{className:"modal-app relative bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsxs("div",{className:"sticky z-10 top-0 left-0 right-0 bg-white px-4 py-2 shadow-md flex justify-between",children:[e.jsx("h3",{className:"text-xl font-medium text-secondColor",children:r.language==="en"?"Add Product":"اضافة منتج جديد"}),e.jsx("button",{className:"border border-secondColor text-secondColor py-1 px-4 rounded-md hover:brightness-110",onClick:()=>{u(!1),document.body.style.overflow="auto"},children:e.jsx(O,{})})]}),e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 flex items-center justify-center",children:e.jsxs("div",{className:"space-y-6 w-full grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"image",value:r.language==="en"?"Image *":"الصوره *"})}),e.jsx(z,{id:"image",required:!0,onChange:l=>N(l.target.files[0])})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"title_en",value:r.language==="en"?"Product Name English *":"اسم المنتج بالانجليزية *"})}),e.jsx(h,{id:"title_en",type:"text",required:!0,value:s.title_en,onChange:l=>n({...s,title_en:l.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"title_ar",value:r.language==="en"?"Product Name Arabic *":"اسم المنتج بالعربية *"})}),e.jsx(h,{id:"title_ar",type:"text",required:!0,value:s.title_ar,onChange:l=>n({...s,title_ar:l.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"category",value:r.language==="en"?"Product Category *":"تصنيف المنتج *"})}),e.jsx(M,{name:"category",id:"category",className:"w-full",options:r.language==="en"?b:o,placeholder:r.language==="en"?"Product Category":"تصنيف المنتج",isRtl:r.language==="ar",isSearchable:!0,required:!0,value:s.category,onChange:l=>n({...s,category:l})})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"quantity",value:r.language==="en"?"Quantity *":"* الكمية"})}),e.jsx(h,{id:"quantity",type:"number",required:!0,value:s.quantity,onChange:l=>n({...s,quantity:l.target.value})})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"Price",value:r.language==="en"?"Price *":" *السعر"})}),e.jsx(h,{id:"Price",type:"number",required:!0,value:s.price,onChange:l=>n({...s,price:l.target.value})})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"start-expired",value:r.language==="en"?"Start Expired *":"تاريخ الانتاج *"})}),e.jsx(h,{id:"start-expired",type:"date",required:!0,value:s.start_date,onChange:l=>n({...s,start_date:l.target.value})})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"end-expired",value:r.language==="en"?"End Expired *":"تاريخ الانتهاء *"})}),e.jsx(h,{id:"end-expired",type:"date",required:!0,value:s.end_date,onChange:l=>n({...s,end_date:l.target.value})})]})]})}),e.jsxs("div",{className:" sticky z-10 bottom-0 left-0 right-0 bg-gray-50 px-4 py-3 shadow-md flex items-center gap-2",children:[e.jsx("button",{className:"bg-secondColor py-1 px-4 rounded-md hover:brightness-110 text-white mx-2",onClick:t,disabled:f,children:f?e.jsx(B,{"aria-label":"loading...",color:"purple"}):r.language==="en"?"Save":"حفظ"}),e.jsx("button",{className:"border border-secondColor text-secondColor py-1 px-4 rounded-md hover:brightness-110",onClick:()=>{u(!1),document.body.style.overflow="auto"},children:r.language==="en"?"Cancel":"الغاء"}),e.jsx("span",{className:"text-xs text-red-600 font-bold",children:r.language==="en"?"Please Enter All Data*":"برجاء ادخال جميع البيانات المطلوبه*"})]})]})]})})},W=({productId:m,editModal:u,setEditModal:x,setSelectedGovernorate:b,encategoriesOptions:o,arcategoriesOptions:g})=>{const{i18n:d}=P(),{editProduct:r,mainRequest:v}=i.useContext(F),s=JSON.parse(localStorage.getItem("sellerToken")),[n,j]=i.useState(null),[N,f]=i.useState(null),k=async()=>{try{const a=await v.post(`${D}/vendor/products/get`,{token:s,id:m}),{data:y}=a;j(y.data)}catch(a){console.log(a)}};i.useEffect(()=>{k()},[m]);const[t,l]=i.useState({image:null,title_en:"",title_ar:"",category:null,quantity:"",price:"",start_date:"",end_date:""});i.useEffect(()=>{n&&(f(n.images[0].path),l({image:null,title_en:n.title.en,title_ar:n.title.ar,category:n.category,quantity:n.quantity,price:n.price,start_date:n.start_date,end_date:n.end_date}))},[n,m]);const[_,w]=i.useState(null),[S,C]=i.useState(!1),q=()=>{if(_){const a=new FileReader;a.onloadend=()=>{const y=new Blob([a.result],{type:_.type}),p=new FormData;p.append("image",y),p.append("title_en",t.title_en),p.append("title_ar",t.title_ar),p.append("category_id",t.category.value||n.category.id),p.append("quantity",t.quantity),p.append("price",t.price),p.append("start_date",t.start_date),p.append("end_date",t.end_date),r(p,C,x,m,getSellerProducts,setAllProducts)},a.readAsArrayBuffer(_)}else{const a=new FormData;a.append("title_en",t.title_en),a.append("title_ar",t.title_ar),a.append("category_id",t.category.value||n.category.id),a.append("quantity",t.quantity),a.append("price",t.price),a.append("start_date",t.start_date),a.append("end_date",t.end_date),r(a,C,x,m,getSellerProducts,setAllProducts)}};return e.jsx("div",{className:"fixed z-[10000] inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen px-4 pt-4 pb-20 sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-90"})}),e.jsxs("div",{className:"modal-app relative bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsxs("div",{className:"sticky z-10 top-0 left-0 right-0 bg-white px-4 py-2 shadow-md flex justify-between",children:[e.jsx("h3",{className:"text-xl font-medium text-secondColor",children:d.language==="en"?"Edit Product":"تعديل المنتج"}),e.jsx("button",{className:"border border-secondColor text-secondColor py-1 px-4 rounded-md hover:brightness-110",onClick:()=>{x(!1),document.body.style.overflow="auto"},children:e.jsx(O,{})})]}),e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 flex items-center justify-center",children:e.jsxs("div",{className:"space-y-6 grid grid-cols-2 gap-3 w-full",children:[e.jsxs("div",{className:"col-span-2",children:[n&&e.jsx("div",{className:"mb-2 flex items-center justify-center",children:e.jsx("img",{src:`https://admin.horriizon.com/images/${N}`,alt:d.language==="en"?t.title_en:t.title_ar,className:"w-32 h-32"})}),e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"image",value:d.language==="en"?"Image ":"الصوره "})}),e.jsx(z,{id:"image",onChange:a=>w(a.target.files[0])})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"title_en",value:d.language==="en"?"Product Name English ":"اسم المنتج بالانجليزية "})}),e.jsx(h,{id:"title_en",type:"text",value:t.title_en,onChange:a=>l({...t,title_en:a.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"title_ar",value:d.language==="en"?"Product Name Arabic ":"اسم المنتج بالعربية "})}),e.jsx(h,{id:"title_ar",type:"text",value:t.title_ar,onChange:a=>l({...t,title_ar:a.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"category",value:d.language==="en"?"Product Category ":"تصنيف المنتج "})}),e.jsx(M,{name:"category",id:"category",className:"w-full",options:d.language==="en"?o:g,placeholder:d.language==="en"?"Product Category":"تصنيف المنتج",isRtl:d.language==="ar",isSearchable:!0,value:t.category,onChange:a=>l({...t,category:a})})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"quantity",value:d.language==="en"?"Quantity ":" الكمية"})}),e.jsx(h,{id:"quantity",type:"number",value:t.quantity,onChange:a=>l({...t,quantity:a.target.value})})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"Price",value:d.language==="en"?"Price ":" السعر"})}),e.jsx(h,{id:"Price",type:"number",value:t.price,onChange:a=>l({...t,price:a.target.value})})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"start-expired",value:d.language==="en"?"Start Expired ":"تاريخ الانتاج "})}),e.jsx(h,{id:"start-expired",type:"date",value:t.start_date,onChange:a=>l({...t,start_date:a.target.value})})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(c,{htmlFor:"end-expired",value:d.language==="en"?"End Expired ":"تاريخ الانتهاء "})}),e.jsx(h,{id:"end-expired",type:"date",value:t.end_date,onChange:a=>l({...t,end_date:a.target.value})})]})]})}),e.jsxs("div",{className:" sticky z-10 bottom-0 left-0 right-0 bg-gray-50 px-4 py-3 shadow-md flex items-center gap-2",children:[e.jsx("button",{className:"bg-secondColor py-1 px-4 rounded-md hover:brightness-110 text-white mx-2",onClick:q,disabled:S,children:S?e.jsx(B,{"aria-label":"loading...",color:"purple"}):d.language==="en"?"Save":"حفظ"}),e.jsx("button",{className:"border border-secondColor text-secondColor py-1 px-4 rounded-md hover:brightness-110",onClick:()=>{x(!1),document.body.style.overflow="auto"},children:d.language==="en"?"Cancel":"الغاء"})]})]})]})})},X=({deleteModal:m,setDeleteModal:u,productId:x,getSellerProducts:b,setAllProducts:o})=>{const{i18n:g}=P();console.log(x);const d=JSON.parse(localStorage.getItem("sellerToken")),{mainRequest:r}=i.useContext(F),v=async()=>{try{const s=await r.post(`${D}/vendor/products/${x}/delete`,{token:d});E.success(g.language==="en"?"the product successfully delete":"تم حذف المنتج "),u(!1),b(o)}catch(s){console.log(s),E.error(g.language==="en"?"theres is an error, please try again":"يوجد خطأ، برجاء المحاوله مره اخره"),u(!1)}};return e.jsxs(A,{className:"z-[10000] modal",show:m,size:"md",popup:!0,onClose:()=>{u(!1),document.body.style.overflow="auto"},children:[e.jsx(A.Header,{}),e.jsx(A.Body,{children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{className:"mx-auto mb-4 h-14 w-14 text-gray-400 dark:text-gray-200"}),e.jsx("h3",{className:"mb-5 text-lg font-normal text-gray-500 dark:text-gray-400",children:g.language==="en"?"Are you sure you want to delete this product?":"هل انت متاكد انك تريد حذف هذا المنتج؟"}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(I,{color:"failure",onClick:v,children:g.language==="en"?"Yes, I'm sure":"نعم، انا متاكد"}),e.jsx(I,{color:"gray",onClick:()=>{document.body.style.overflow="auto",u(!1)},children:g.language==="en"?"No, cancel":"لا، الغاء"})]})]})})]})},ue=()=>{const{i18n:m}=P(),u=localStorage.getItem("sellerLogged");JSON.parse(localStorage.getItem("sellerToken"));const x=J();if(!u){x("/seller-login");return}const[b,o]=i.useState(!1),[g,d]=i.useState(!1),[r,v]=i.useState(!1),[s,n]=i.useState([]),[j,N]=i.useState(null),[f,k]=i.useState(null),t=()=>{o(!0)},l=()=>{d(!0)},_=()=>{v(!0)},{getAllCategories:w,categories:S,getSellerProducts:C}=i.useContext(F),q=S.map(y=>({value:y.id,label:y.title.en})),a=S.map(y=>({value:y.id,label:y.title.ar}));return i.useEffect(()=>{C(n),w()},[u]),e.jsxs("div",{className:"container py-10",children:[e.jsxs("div",{className:"mb-10 flex items-center justify-between",children:[e.jsx(G,{}),e.jsx("button",{type:"button",onClick:t,className:"bg-secondColor py-2 px-4 rounded-lg hover:brightness-110 text-white",children:m.language==="en"?"Add Product":"اضافة منتج جديد"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 2xl::grid-cols-5 gap-5",children:s.map(y=>{const{id:p,category:T,title:L,images:R,price:$,quantity:Q,end_date:H}=y;return e.jsx(K,{openEditModal:l,openDeleteModal:_,id:p,title:L,image:R[0].path,category:T,price:$,quantity:Q,end_date:H,setDeleteProductId:N,setEditProductId:k},p)})}),b&&e.jsx(V,{getSellerProducts:C,setAllProducts:n,addModal:b,setAddModal:o,encategoriesOptions:q,arcategoriesOptions:a}),g&&e.jsx(W,{getSellerProducts:C,setAllProducts:n,editModal:g,setEditModal:d,encategoriesOptions:q,arcategoriesOptions:a,productId:f}),r&&e.jsx(X,{getSellerProducts:C,setAllProducts:n,deleteModal:r,setDeleteModal:v,productId:j})]})};export{ue as default};

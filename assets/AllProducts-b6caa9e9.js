import{x as R,r as i,e as L,u as q,j as s}from"./index-90b8ff94.js";import{S as A}from"./SingleProductCard-9c73be22.js";import{S as k}from"./index-1b2753de.js";import"./index.esm-89a6a78b.js";import"./toConsumableArray-efda5d7e.js";const $=({})=>{const p=R();new URLSearchParams(p.search).get("q");const{products:r,categories:f,searchQuery:c,setSearchQuery:b}=i.useContext(L),o=Math.min(...r.map(e=>e.price))===1/0?0:Math.min(...r.map(e=>e.price)),d=Math.max(...r.map(e=>e.price))===-1/0?1e4:Math.max(...r.map(e=>e.price)),[a,j]=i.useState([o,d]),{i18n:n}=q(),[m,I]=i.useState(!0),[t,u]=i.useState([]),[h,P]=i.useState([]);i.useEffect(()=>{const e=r.filter(l=>{const y=l.title.en.toLowerCase(),w=l.title.ar.toLowerCase(),g=c.toLowerCase(),x=l.price,N=l.category_id,v=y.includes(g)||w.includes(g),S=x>=a[0]&&x<=a[1],M=t.length===0||t.includes(N);return v&&S&&M});P(e)},[r,c,a,t]);const C=e=>{t.includes(e)?u(t.filter(l=>l!==e)):u([...t,e])};return s.jsx("div",{className:"flex flex-col container py-5 min-h-screen relative",children:s.jsxs("div",{className:"flex flex-col sm:flex-row",children:[s.jsxs("div",{className:`md:w-1/4 bg-white rounded-lg p-4 md:sticky md:top-44 h-fit overflow-y-auto shadow-lg flex flex-col gap-5 ${!m&&""}`,children:[s.jsx("h3",{className:"font-bold text-lg border-b border-gray-400 pb-4",children:n.language==="en"?"filter":"تصفية"}),s.jsx("div",{className:"w-full border-b border-gray-400 pb-4",children:s.jsx("input",{className:"w-full border border-gray-200 border-solid h-8",type:"text",name:"searchInAllProducts",id:"searchInAllProducts",value:c,placeholder:n.language==="en"?"search":"ابحث",onChange:e=>b(e.target.value)})}),s.jsxs("div",{className:"w-full border-b border-gray-400 pb-4",children:[s.jsxs("label",{className:"text-secondColor font-bold",htmlFor:"priceRange",children:[n.language==="en"?"Price Range":"سعر المنتج ",": ",a[0]," - ",a[1]]}),s.jsx(k,{range:!0,id:"priceRange",className:"mt-4",min:o,max:d,step:10,value:a,onChange:e=>j(e)})]}),s.jsxs("div",{className:"w-full",children:[s.jsxs("h4",{className:"mb-2 text-secondColor font-bold",children:[n.language==="en"?"Categories":"التصنيفات ",":"]}),s.jsx("ul",{children:f.map(e=>s.jsx("li",{children:s.jsxs("label",{htmlFor:e.id,className:"flex items-center gap-4",children:[s.jsx("input",{type:"checkbox",id:e.id,className:"border-solid border-mainColor",checked:t.includes(e.id),onChange:()=>C(e.id)}),n.language==="en"?e.title.en:e.title.ar]})},e.id))})]})]}),s.jsx("div",{className:"md:w-3/4 p-4 ",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:h.length>0?h.map(e=>s.jsx(A,{allProducts:!0,background:"white",productDetails:e,id:e.id,title:e.title,total_price:e.total_price,price:e.price,quantity:e.quantity,image:e.images[0].path,category:e.category},e.id)):s.jsx("p",{children:"No products found."})})})]})})};export{$ as default};

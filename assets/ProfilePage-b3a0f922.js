import{r as o,c as be,u as we,A as ye,j as e,a as J,b as q,Q as u}from"./index-07f41fe7.js";import{F as le,a as te}from"./index.esm-57f0aeb1.js";import{j as _}from"./index.esm-5edd7585.js";import{a as ne}from"./index.esm-da4a82a5.js";import{B as re}from"./Breadcrumbs-ec2d56ab.js";import{S as $}from"./Tooltip-9c721ac5.js";import"./index-d1bd9d3c.js";import{S as Ne}from"./react-select.esm-d8856045.js";import{u as oe}from"./user-image-placeholder-50f80e46.js";import"./iconBase-1692c05c.js";import"./index.esm-df1806d8.js";import"./floating-ui.dom.browser.min-b2afe59a.js";import"./index.esm-8f0d1014.js";import"./toConsumableArray-8cfbb2bf.js";const Re=()=>{const c=localStorage.getItem("userLogged"),d=JSON.parse(localStorage.getItem("userToken")),[i,v]=o.useState({}),f=localStorage.getItem("sellerLogged"),g=JSON.parse(localStorage.getItem("sellerToken")),[t,U]=o.useState({}),ie=be(),{i18n:a}=we(),{getUserInfo:C,getSallerInfo:L,logout:M,governorates:I,getGovernorates:ce}=o.useContext(ye);if(!c&&!f)return ie("/customer-login"),null;const[Q,V]=o.useState(!1),[H,R]=o.useState(!1),[x,de]=o.useState(!1),[n,D]=o.useState(!1),[A,P]=o.useState(!1),[j,m]=o.useState(c?i==null?void 0:i.name:t==null?void 0:t.name),[b,h]=o.useState(c?i==null?void 0:i.email:t==null?void 0:t.email),[w,p]=o.useState(c?i==null?void 0:i.phone:t==null?void 0:t.phone),[S,ue]=o.useState(t==null?void 0:t.cash_number),[y,ge]=o.useState(""),[N,me]=o.useState(""),[he,pe]=o.useState(""),k=()=>{de(!x)},F=()=>{D(!n),P(!1)},E=()=>{P(!A),D(!1)},K=s=>{m(s.target.value)},B=s=>{h(s.target.value)},W=s=>{p(s.target.value)},xe=s=>{ue(s.target.value)},X=s=>{ge(s.target.value)},Y=s=>{me(s.target.value)},O=async s=>{s.preventDefault(),V(!0);try{const l={token:c?d:g,name:j,email:b,phone:w,governorate_id:he||t.governorate_id,cash_number:S},G=await J.post(`${q}${c?"/auth/user-update":"/vendor/auth/vendor-update"}`,l);u.success(a.language==="en"?"The profile updated successfully":"تم تحديث الملف الشخصي بنجاح"),c?C(d,v,m,h,p):L(g,U,m,h,p)}catch{u.error(a.language==="en"?"There is an error, please try again later":"يوجد خطأ ما، الرجاء المحاولة مره اخري")}finally{V(!1),D(!1)}},T=async s=>{if(s.preventDefault(),!y){u.info(a.language==="en"?"please enter new password":"ادخل كلمة المرور الجديده");return}if(!N){u.info(a.language==="en"?"please enter confirmation password":"ادخل تاكيد كلمة المرور");return}if(y!==N){u.info(a.language==="en"?"password and confirmation password not match":"كلمة المرور وتاكيد كلمة المرور غير متطابقين");return}R(!0);try{const l={token:c?d:g,name:j,phone:w,email:b,governorate_id:t.governorate_id,cash_number:S,password:y,password_confirmation:N},G=await J.post(`${q}${c?"/auth/user-update":"/vendor/auth/vendor-update"}`,l);u.success("The password updated successfully"),c?C(d,v,m,h,p):L(g,U,m,h,p)}catch{u.error(a.language==="en"?"There is an error, please try again later":"يوجد خطأ ما، الرجاء المحاولة مره اخري")}finally{R(!1),P(!1)}},Z=o.useRef(null),[r,ee]=o.useState(null),ae=s=>{const l=s.target.files[0];ee({...r,photo:l})},se=async s=>{s.preventDefault();const l={token:c?d:g,image:r.photo,name:j,phone:w,email:b,governorate_id:t.governorate_id,cash_number:S};try{const G=await J.post(`${q}${c?"/auth/user-update":"/vendor/auth/vendor-update"}`,l,{headers:{"Content-Type":"multipart/form-data"}});u.success(a.language==="en"?"The photo updated successfully":"تم تحديث الصورة بنجاح"),C(d,v,m,h,p)}catch{u.error(a.language==="en"?"There is an error, please try again later":"يوجد خطأ ما، الرجاء المحاولة مره اخري")}finally{R(!1),P(!1),z()}},z=()=>{ee({...r,photo:null})};o.useEffect(()=>{c&&C(d,v,m,h,p)},[f,g,c,d]),o.useEffect(()=>{f&&L(g,U,m,h,p)},[f,g,c,d]);const fe=I.map(s=>({value:s.id,label:s.title.en})),je=I.map(s=>({value:s.id,label:s.title.ar}));if(o.useEffect(()=>{ce()},[]),c)return e.jsxs("div",{className:"container py-10",children:[e.jsx("div",{className:"mb-10",children:e.jsx(re,{})}),e.jsxs("div",{className:"grid grid-cols-3 gap-5 my-5",children:[e.jsxs("div",{className:"user-info col-span-3 md:col-span-1 bg-white p-3 shadow-lg rounded-md h-fit",children:[e.jsxs("div",{className:"grid mb-3",children:[r!=null&&r.photo?e.jsx(e.Fragment,{children:e.jsx("div",{className:"img-holder relative -top-10 overflow-hidden w-32 h-32 bg-secondColor text-white grid place-content-center rounded-[50%] mx-auto",children:e.jsx("img",{src:URL.createObjectURL(r==null?void 0:r.photo),alt:"Transfer photo",className:"h-full w-full"})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"img-holder relative -top-10 overflow-hidden w-32 h-32 bg-secondColor text-white grid place-content-center rounded-[50%] mx-auto",children:e.jsx("img",{src:i.image?`https://admin.horriizon.com/public/assets/${i.image}`:oe,className:"h-full w-full",alt:i.name})}),e.jsx("label",{htmlFor:"photoInput",className:"flex flex-col items-center justify-center",children:e.jsx("span",{className:"text-secondColor font-bold border-b border-b-secondColor cursor-pointer",children:a.language==="en"?"Upload New Image":"تحديث الصورة"})}),e.jsx("input",{ref:Z,id:"photoInput",type:"file",accept:".jpg,.jpeg,.png",className:"hidden",onChange:ae})]}),(r==null?void 0:r.photo)&&e.jsx("div",{children:e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx("button",{type:"button",className:"bg-mainColor text-white py-1 px-2 rounded-lg mr-2",onClick:se,children:a.language==="en"?"Save":"حفظ"}),e.jsx("button",{type:"button",className:"bg-red-500 text-white py-1 px-2 rounded-lg",onClick:z,children:a.language==="en"?"Close":"اغلاق"})]})})]}),e.jsxs("div",{className:"info flex flex-col justify-center items-center gap-3",children:[e.jsx("h3",{children:i.name}),e.jsx("h3",{className:"text-sm md:text-md",children:i.email})]}),e.jsxs("div",{className:"actions mt-10 flex flex-col justify-center items-center gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2",onClick:F,children:[e.jsx(_,{})," ",a.language==="en"?"Edit Profile":"تعديل بياناتك"]}),e.jsxs("button",{className:"flex items-center gap-2",onClick:E,children:[e.jsx(_,{})," ",a.language==="en"?"Edit Password":"تغيير كلمة المرور"]}),e.jsxs("button",{onClick:M,className:"flex items-center gap-2",children:[e.jsx(ne,{}),a.language==="en"?"Logout":"تسجيل الخروج"]})]})]}),e.jsxs("div",{className:"col-span-3 md:col-span-2 bg-white p-3 shadow-lg rounded-md h-fit",children:[e.jsx("h2",{className:"text-xl font-medium",children:a.language==="ar"?"الملف الشخصي":"Profile"}),e.jsxs("form",{className:"flex flex-col gap-5 items-center my-5",onSubmit:O,children:[e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"name",children:a.language==="ar"?"الاسم":"Full Name"}),e.jsx("input",{className:"w-full bg-gray-300",id:"name",type:"text",value:j,readOnly:!n,onChange:s=>{n&&K(s)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"phone",children:a.language==="ar"?"رقم الهاتف":"Phone"}),e.jsx("input",{className:"w-full bg-gray-300",id:"phone",type:"tel",value:w,readOnly:!n,onChange:s=>{n&&W(s)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"email",children:a.language==="ar"?"البريد الالكتروني":"Email"}),e.jsx("input",{className:"w-full bg-gray-300",id:"email",type:"email",value:b,readOnly:!n,onChange:s=>{n&&B(s)}})]}),n&&e.jsxs("div",{className:"w-full grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:O,className:"m-0 bg-secondColor py-2 rounded-xl text-white",type:"submit",children:Q?e.jsx($,{"aria-label":"loading...",color:"purple"}):a.language==="ar"?"حفظ التعديلات":"Save Changes"}),e.jsx("button",{className:"py-2 rounded-xl border border-secondColor text-secondColor",type:"button",onClick:F,children:a.language==="ar"?"الغاء":"Cancel"})]})]}),A&&e.jsxs("form",{className:"flex flex-col gap-5 items-center my-5",onSubmit:T,children:[e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col relative",children:[e.jsx("label",{htmlFor:"new-password",children:a.language==="ar"?"كلمة المرور الجديده":"New Password"}),e.jsx("input",{className:"w-full bg-gray-300",id:"new-password",type:x?"text":"password",value:y,onChange:X}),x?e.jsx(le,{className:`absolute ${a.language==="en"?"right-3":"left-3"} top-1/2 transform translate-y-1/2 cursor-pointer`,onClick:k}):e.jsx(te,{className:`absolute ${a.language==="en"?"right-3":"left-3"} top-1/2 transform translate-y-1/2 cursor-pointer`,onClick:k})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col relative",children:[e.jsx("label",{htmlFor:"confirm-password",children:a.language==="ar"?"اعد كتابة كلمة المرور":"Confirm Password"}),e.jsx("input",{className:"w-full bg-gray-300",id:"confirm-password",type:x?"text":"password",value:N,onChange:Y})]}),e.jsxs("div",{className:"w-full grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:T,className:"m-0 bg-secondColor py-2 rounded-xl text-white",type:"submit",children:H?e.jsx($,{"aria-label":"loading...",color:"purple"}):a.language==="ar"?"حفظ كلمة المرور":"Uptade Password"}),e.jsx("button",{className:"py-2 rounded-xl border border-secondColor text-secondColor",type:"button",onClick:E,children:a.language==="ar"?"الغاء":"Cancel"})]})]})]})]})]});if(f){const s=I.find(l=>l.id===t.governorate_id);return e.jsxs("div",{className:"container py-10",children:[e.jsx("div",{className:"mb-10",children:e.jsx(re,{})}),e.jsxs("div",{className:"grid grid-cols-3 gap-5 my-5",children:[e.jsxs("div",{className:"user-info col-span-3 md:col-span-1 bg-white p-3 shadow-lg rounded-md h-fit",children:[e.jsxs("div",{className:"grid mb-3",children:[r!=null&&r.photo?e.jsx(e.Fragment,{children:e.jsx("div",{className:"img-holder relative -top-10 overflow-hidden w-32 h-32 bg-secondColor text-white grid place-content-center rounded-[50%] mx-auto",children:e.jsx("img",{src:URL.createObjectURL(r==null?void 0:r.photo),alt:"Transfer photo",className:"h-full w-full"})})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"img-holder relative -top-10 overflow-hidden w-32 h-32 bg-secondColor text-white grid place-content-center rounded-[50%] mx-auto",children:e.jsx("img",{src:i.image?`https://admin.horriizon.com/images/${i.image}`:oe,className:"h-full w-full",alt:i.name})}),e.jsx("label",{htmlFor:"photoInput",className:"flex flex-col items-center justify-center",children:e.jsx("span",{className:"text-secondColor font-bold border-b border-b-secondColor cursor-pointer",children:a.language==="en"?"Upload New Image":"تحديث الصورة"})}),e.jsx("input",{ref:Z,id:"photoInput",type:"file",accept:".jpg,.jpeg,.png",className:"hidden",onChange:ae})]}),(r==null?void 0:r.photo)&&e.jsx("div",{children:e.jsxs("div",{className:"flex justify-center gap-3",children:[e.jsx("button",{type:"button",className:"bg-mainColor text-white py-1 px-2 rounded-lg mr-2",onClick:se,children:a.language==="en"?"Save":"حفظ"}),e.jsx("button",{type:"button",className:"bg-red-500 text-white py-1 px-2 rounded-lg",onClick:z,children:a.language==="en"?"Close":"اغلاق"})]})})]}),e.jsxs("div",{className:"info flex flex-col justify-center items-center gap-3",children:[e.jsx("h3",{children:t.name}),e.jsx("h3",{className:"text-sm md:text-md",children:t.email})]}),e.jsxs("div",{className:"actions mt-10 flex flex-col justify-center items-center gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2",onClick:F,children:[e.jsx(_,{})," ",a.language==="en"?"Edit Profile":"تعديل بياناتك"]}),e.jsxs("button",{className:"flex items-center gap-2",onClick:E,children:[e.jsx(_,{})," ",a.language==="en"?"Edit Password":"تغيير كلمة المرور"]}),e.jsxs("button",{onClick:M,className:"flex items-center gap-2",children:[e.jsx(ne,{}),a.language==="en"?"Logout":"تسجيل الخروج"]})]})]}),e.jsxs("div",{className:"col-span-3 md:col-span-2 bg-white p-3 shadow-lg rounded-md h-fit",children:[e.jsx("h2",{className:"text-xl font-medium",children:a.language==="ar"?"الملف الشخصي":"Profile"}),e.jsxs("form",{className:"flex flex-col gap-5 items-center my-5",onSubmit:O,children:[e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"name",children:a.language==="ar"?"الاسم":"Full Name"}),e.jsx("input",{className:"w-full bg-gray-300",id:"name",type:"text",value:j||t.name,readOnly:!n,onChange:l=>{n&&K(l)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"phone",children:a.language==="ar"?"رقم الهاتف":"Phone"}),e.jsx("input",{className:"w-full bg-gray-300",id:"phone",type:"tel",value:w||t.phone,readOnly:!n,onChange:l=>{n&&W(l)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"email",children:a.language==="ar"?"البريد الالكتروني":"Email"}),e.jsx("input",{className:"w-full bg-gray-300",id:"email",type:"email",value:b||t.email,readOnly:!n,onChange:l=>{n&&B(l)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"cashNumber",children:a.language==="ar"?"رقم المحفظة الالكترونية":"Cash Number"}),e.jsx("input",{className:"w-full bg-gray-300",id:"cashNumber",type:"tel",value:S||t.cash_number,readOnly:!n,onChange:l=>{n&&xe(l)}})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col",children:[e.jsx("label",{htmlFor:"email",children:a.language==="ar"?"المحافظة":"Governorate"}),n?e.jsx(Ne,{name:"governorate",id:"governorate",className:"rounded-lg border-gray-300 shadow-md col-span-2",onChange:l=>pe(l.value),options:a.language==="en"?fe:je,placeholder:a.language==="ar"?"ادخل محافظتك":"enter your Governorate",isRtl:a.language==="ar",readOnly:!n,isSearchable:!0,required:!0}):e.jsx("input",{className:"w-full bg-gray-300",id:"governorate",type:"text",value:a.language==="en"?s==null?void 0:s.title.en:s==null?void 0:s.title.ar,readOnly:!n,onChange:l=>{n&&B(l)}})]}),n&&e.jsxs("div",{className:"w-full grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:O,className:"m-0 bg-secondColor py-2 rounded-xl text-white",type:"submit",children:Q?e.jsx($,{"aria-label":"loading...",color:"purple"}):a.language==="ar"?"حفظ التعديلات":"Save Changes"}),e.jsx("button",{className:"py-2 rounded-xl border border-secondColor text-secondColor",type:"button",onClick:F,children:a.language==="ar"?"الغاء":"Cancel"})]})]}),A&&e.jsxs("form",{className:"flex flex-col gap-5 items-center my-5",onSubmit:T,children:[e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col relative",children:[e.jsx("label",{htmlFor:"new-password",children:a.language==="ar"?"كلمة المرور الجديده":"New Password"}),e.jsx("input",{className:"w-full bg-gray-300",id:"new-password",type:x?"text":"password",value:y,onChange:X}),x?e.jsx(le,{className:`absolute ${a.language==="en"?"right-3":"left-3"} top-1/2 transform translate-y-1/2 cursor-pointer`,onClick:k}):e.jsx(te,{className:`absolute ${a.language==="en"?"right-3":"left-3"} top-1/2 transform translate-y-1/2 cursor-pointer`,onClick:k})]}),e.jsxs("div",{className:"flex w-full gap-2 justify-between flex-col relative",children:[e.jsx("label",{htmlFor:"confirm-password",children:a.language==="ar"?"اعد كتابة كلمة المرور":"Confirm Password"}),e.jsx("input",{className:"w-full bg-gray-300",id:"confirm-password",type:x?"text":"password",value:N,onChange:Y})]}),e.jsxs("div",{className:"w-full grid grid-cols-2 gap-3",children:[e.jsx("button",{onClick:T,className:"m-0 bg-secondColor py-2 rounded-xl text-white",type:"submit",children:H?e.jsx($,{"aria-label":"loading...",color:"purple"}):a.language==="ar"?"حفظ كلمة المرور":"Uptade Password"}),e.jsx("button",{className:"py-2 rounded-xl border border-secondColor text-secondColor",type:"button",onClick:E,children:a.language==="ar"?"الغاء":"Cancel"})]})]})]})]})]})}};export{Re as default};

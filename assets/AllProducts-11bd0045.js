import{r as a,e as I,u as L,j as t,a as _,b as F}from"./index-5edf5ab7.js";import{S as Q}from"./SingleProductCard-86457c4f.js";import{S as $}from"./index-8bf3317d.js";import"./index.esm-13602fdd.js";import"./toConsumableArray-51e2cfaf.js";const B=({})=>{const{products:m,categories:j}=a.useContext(I),[o,P]=a.useState([]),[l,C]=a.useState([]),u=Math.min(...l.map(e=>e.price))===1/0?0:Math.min(...l.map(e=>e.price)),h=Math.max(...l.map(e=>e.price))===-1/0?1e4:Math.max(...l.map(e=>e.price)),[i,y]=a.useState([u,h]),[n,w]=a.useState(""),[g,q]=a.useState(!0),{i18n:c}=L(),[r,p]=a.useState([]),[x,N]=a.useState([]),S=e=>{r.includes(e)?p(r.filter(s=>s!==e)):p([...r,e])},v=async()=>{try{const e=await _.get(`${F}/section/all_product`),{data:s}=e;P(s.data.data),console.log(s.data.data)}catch(e){console.log(e)}};return a.useEffect(()=>{v()},[]),a.useEffect(()=>{const e=[...o,...m];C(e)},[o,m]),a.useEffect(()=>{const e=l.filter(s=>!o.some(d=>d.id===s.id)).filter(s=>{const d=s.title.en.toLowerCase(),A=s.title.ar.toLowerCase(),f=n.toLowerCase(),b=s.price,M=s.category_id,E=d.includes(f)||A.includes(f),R=b>=i[0]&&b<=i[1],k=r.length===0||r.includes(M);return E&&R&&k});N(e)},[l,o,n,i,r]),t.jsx("div",{className:"flex flex-col container py-5 min-h-screen relative",children:t.jsxs("div",{className:"flex flex-col sm:flex-row",children:[t.jsxs("div",{className:`md:w-1/4 bg-white rounded-lg p-4 md:sticky md:top-44 h-fit overflow-y-auto shadow-lg flex flex-col gap-5 ${!g&&""}`,children:[t.jsx("h3",{className:"font-bold text-lg border-b border-gray-400 pb-4",children:c.language==="en"?"filter":"تصفية"}),t.jsx("div",{className:"w-full border-b border-gray-400 pb-4",children:t.jsx("input",{className:"w-full border border-gray-200 border-solid h-8",type:"text",name:"searchInAllProducts",id:"searchInAllProducts",value:n,placeholder:c.language==="en"?"search":"ابحث",onChange:e=>w(e.target.value)})}),t.jsxs("div",{className:"w-full border-b border-gray-400 pb-4",children:[t.jsxs("label",{className:"text-secondColor font-bold",htmlFor:"priceRange",children:[c.language==="en"?"Price Range":"سعر المنتج ",": ",i[0]," - ",i[1]]}),t.jsx($,{range:!0,id:"priceRange",className:"mt-4",min:u,max:h,step:10,value:i,onChange:e=>y(e)})]}),t.jsxs("div",{className:"w-full",children:[t.jsxs("h4",{className:"mb-2 text-secondColor font-bold",children:[c.language==="en"?"Categories":"التصنيفات ",":"]}),t.jsx("ul",{children:j.map(e=>t.jsx("li",{children:t.jsxs("label",{htmlFor:e.id,className:"flex items-center gap-4",children:[t.jsx("input",{type:"checkbox",id:e.id,className:"border-solid border-mainColor",checked:r.includes(e.id),onChange:()=>S(e.id)}),c.language==="en"?e.title.en:e.title.ar]})},e.id))})]})]}),t.jsx("div",{className:"md:w-3/4 p-4 ",children:t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:x.length>0?x.map(e=>t.jsx(Q,{allProducts:!0,background:"white",productDetails:e,id:e.id,title:e.title,total_price:e.total_price,price:e.price,quantity:e.quantity,image:e.images[0].path,category:e.category},e.id)):t.jsx("p",{children:"No products found."})})})]})})};export{B as default};

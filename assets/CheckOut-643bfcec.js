import{u as y,j as e,c as O,r as d,A as R,Q as T,b as _}from"./index-bc21261c.js";import{k as q}from"./index.esm-633d94ac.js";/* empty css              */import{S as $}from"./react-select.esm-b3bfc495.js";import"./iconBase-1272fafd.js";import"./toConsumableArray-cff1766e.js";import"./floating-ui.dom.browser.min-b2afe59a.js";const L=({title:c,price:s,productTotalPrice:m,quantity:p,image:i})=>{const{i18n:o}=y();return e.jsxs("div",{className:"flex justify-between gap-3 border border-gray-300 py-3 px-2 rounded-md shadow-sm",children:[e.jsx("img",{className:"w-20 h-20 object-cover",src:i,alt:o.language==="en"?c.en:c.ar}),e.jsxs("div",{className:"grid flex-1 gap-5",children:[e.jsx("h3",{className:"font-medium",children:o.language==="en"?c.en:c.ar}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-gray-500",children:[o.language==="en"?"Quantity : ":"الكمية : ",e.jsx("span",{children:p})]}),e.jsx("span",{children:"*"}),e.jsxs("p",{className:"text-gray-500",children:[o.language==="en"?"Price : ":"السعر : ",e.jsx("span",{children:s})]})]})]}),e.jsx("span",{className:"text-secondColor font-bold",children:`${o.language==="ar"?`جنية ${m}`:`${m} EGY`}`})]})},H=()=>{const c=O(),{i18n:s}=y(),[m,p]=d.useState([]),i=JSON.parse(localStorage.getItem("userToken")),o=localStorage.getItem("userLogged");if(!o)return c("/customer-login"),null;const[j,N]=d.useState(""),[t,h]=d.useState({firstName:"",lastName:"",phoneNumber:"",email:"",address:"",apartment:"",floor:"",street:"",building:"",selectedPaymentMethod:"vodafone-cash",photo:null,cashNumber:"",notes:""}),{getCartItems:v,getTotalPriceInCart:C,total:g,governorates:u,getGovernorates:w,mainRequest:P}=d.useContext(R),x=d.useRef(null),r=a=>{h({...t,[a.target.name]:a.target.value})},b=a=>{h({...t,selectedPaymentMethod:a.target.value})},S=a=>{const n=a.target.files[0];h({...t,photo:n})},k=()=>{x.current.click()},M=()=>{h({...t,photo:null})},F=async()=>{const a={...t,photo:"empty",city:j,token:i};console.log(a);const n=new FormData;if(n.append("token",a.token),n.append("first_name",a.firstName),n.append("last_name",a.lastName),n.append("phone",a.phoneNumber),n.append("email",a.email),n.append("address",a.address),n.append("apartment",a.apartment),n.append("floor",a.floor),n.append("street",a.street),n.append("building",a.building),n.append("city",a.city),n.append("notes",a.notes),n.append("selectedPaymentMethod",a.selectedPaymentMethod),n.append("vodafone_cash_number",a.cashNumber),!Object.values(a).every(l=>l)){T.info(s.language==="en"?"Please fill all fields":"من فضلك ادخل جميع البيانات");return}try{const l=await P.post(`${_}/payment`,n);window.open(l.data,"_blank"),console.log(l)}catch(l){console.log(l)}};d.useEffect(()=>{o&&i&&(C(),v(i,p))},[o,i,g]);const I=u.map(a=>({value:a.id,label:a.title.en})),E=u.map(a=>({value:a.id,label:a.title.ar}));return d.useEffect(()=>{w()},[]),e.jsx("div",{className:"container py-10",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"grid gap-3 lg:sticky top-0 h-fit",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-mainColor font-bold text-lg",children:"Payment Method"}),e.jsx("p",{className:"text-gray-500",children:"Select the number for payment of your item"})]}),e.jsxs("div",{className:"flex justify-between items-center rounded-lg border border-gray-500 p-2",children:[e.jsx("label",{className:"flex-1 cursor-pointer",htmlFor:"vodafone-cash",children:s.language==="en"?"vodafone Cash":"فودافون كاش"}),e.jsx("input",{className:"cursor-pointer",type:"radio",name:"selectedPaymentMethod",id:"vodafone-cash",value:"vodafone-cash",checked:t.selectedPaymentMethod==="vodafone-cash",onChange:b})]}),e.jsxs("div",{className:"flex justify-between items-center rounded-lg border border-gray-500 p-2",children:[e.jsx("label",{className:"flex-1 cursor-pointer",htmlFor:"cash-on-delivery",children:s.language==="en"?"Cash on Delivery":"الدفع عند الاستلام"}),e.jsx("input",{className:"cursor-pointer",type:"radio",name:"selectedPaymentMethod",id:"cash-on-delivery",value:"cash-on-delivery",checked:t.selectedPaymentMethod==="cash-on-delivery",onChange:b})]})]}),t.selectedPaymentMethod!=="cash-on-delivery"&&e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-mainColor font-bold text-lg",children:"Transfer data"}),e.jsx("p",{className:"text-gray-500",children:"Select the image for the conversion"})]}),e.jsxs("div",{className:"flex items-center flex-col gap-2 justify-center",children:[e.jsxs("div",{className:"w-full flex gap-2 flex-col",children:[e.jsx("label",{htmlFor:"cashNumber",children:"Enter Your Cash Number"}),e.jsx("input",{placeholder:s.language==="ar"?"رقم المفظة الالكترونية":"Cash Number",className:"rounded-lg border-gray-300 shadow-md",type:"tel",id:"cashNumber",name:"cashNumber",value:t.cashNumber,onChange:r})]}),e.jsxs("div",{className:"w-2/3 bg-[#F8F8FF] text-center border-dashed border-2 rounded-lg border-gray-300 p-4",children:[t.photo?e.jsxs("div",{children:[e.jsx("img",{src:URL.createObjectURL(t.photo),alt:"Transfer photo",className:"w-20 h-20 mx-auto mb-2"}),e.jsx("span",{className:"text-secondColor font-bold border-b border-b-secondColor",children:"Photo Selected"}),e.jsxs("div",{className:"flex justify-center mt-2",children:[e.jsx("button",{type:"button",className:"bg-mainColor text-white py-1 px-2 rounded-lg mr-2",onClick:k,children:"Update Photo"}),e.jsx("button",{type:"button",className:"bg-red-500 text-white py-1 px-2 rounded-lg",onClick:M,children:"Delete Photo"})]})]}):e.jsxs("label",{htmlFor:"photoInput",className:"flex flex-col items-center justify-center",children:[e.jsx(q,{className:"text-[4rem]"}),e.jsx("span",{className:"text-secondColor font-bold border-b border-b-secondColor cursor-pointer",children:"Select Photo"})]}),e.jsx("input",{ref:x,id:"photoInput",type:"file",accept:".jpg,.jpeg,.png",className:"hidden",onChange:S}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Supported formats: JPEG, PNG"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-mainColor font-bold text-lg",children:"Personal Details"}),e.jsx("p",{className:"text-gray-500",children:"Complete personal details to continue the payment"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[e.jsx("input",{placeholder:s.language==="en"?"First Name":"الاسم الاول",className:"rounded-lg border-gray-300 shadow-md",type:"text",name:"firstName",value:t.firstName,onChange:r}),e.jsx("input",{placeholder:s.language==="en"?"Last Name":"الاسم الاخير",className:"rounded-lg border-gray-300 shadow-md",type:"text",name:"lastName",value:t.lastName,onChange:r}),e.jsx("input",{placeholder:s.language==="en"?"Phone Number":"رقم الهاتف",className:"rounded-lg border-gray-300 shadow-md",type:"tel",name:"phoneNumber",value:t.phoneNumber,onChange:r}),e.jsx("input",{placeholder:s.language==="en"?"Email":"البريد الالكتروني",className:"rounded-lg border-gray-300 shadow-md",type:"email",name:"email",value:t.email,onChange:r}),e.jsx($,{name:"governorate",id:"governorate",className:"rounded-lg border-gray-300 shadow-md col-span-2",onChange:a=>N(a.label),options:s.language==="en"?I:E,placeholder:s.language==="ar"?"ادخل محافظتك":"enter your Governorate",isRtl:s.language==="ar",isSearchable:!0,required:!0}),e.jsx("input",{placeholder:s.language==="ar"?"عنوانك":"Address",className:"rounded-lg border-gray-300 shadow-md col-span-2",type:"text",name:"address",value:t.address,onChange:r}),e.jsx("input",{placeholder:s.language==="ar"?"الشارع":"Street",className:"rounded-lg border-gray-300 shadow-md col-span-2",type:"text",name:"street",value:t.street,onChange:r}),e.jsxs("div",{className:"grid col-span-2 grid-cols-3 gap-2",children:[e.jsx("input",{placeholder:s.language==="ar"?"المبنى":"Building",className:"rounded-lg border-gray-300 shadow-md",type:"text",name:"building",value:t.building,onChange:r}),e.jsx("input",{placeholder:s.language==="ar"?"الشقة":"floor",className:"rounded-lg border-gray-300 shadow-md",type:"text",name:"floor",value:t.floor,onChange:r}),e.jsx("input",{placeholder:s.language==="ar"?"الشقة":"Apartment",className:"rounded-lg border-gray-300 shadow-md",type:"text",name:"apartment",value:t.apartment,onChange:r})]}),e.jsx("textarea",{name:"notes",id:"notes",value:t.notes,onChange:r,placeholder:s.language==="en"?"enter short note":"اترك ملاحظة",className:"rounded-lg border-gray-300 shadow-md col-span-2 resize-y min-h-[5rem] max-h-[10rem]"})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-mainColor font-bold text-lg",children:"Current Order"}),e.jsx("p",{className:"text-gray-500",children:"The sum of all total payments for goods there"})]}),m.map(a=>{const{id:n,title:l,images:D,price:G,quantity_of_cart:f}=a;return e.jsx(L,{quantity:f.quantity,title:l,price:G,productTotalPrice:f.total,image:`https://admin.horriizon.com/images/${D[0].path}`},n)}),e.jsxs("div",{className:"flex justify-between items-center font-medium py-4 border-dotted border-b-2",children:[e.jsx("h6",{children:"Subtotal"}),e.jsxs("p",{children:[g," EGY"]})]}),e.jsxs("button",{className:"bg-secondColor text-white text-xl py-2 px-4 rounded-md",onClick:F,children:["Pay ",g," EGY"]})]})]})})};export{H as default};
